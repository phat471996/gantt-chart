"use strict";var ganttChart=function(t){function e(t){var e=$.call(t);return e!==tt&&e!==et&&C("Expected object or array. Got: "+e),e===tt?(Y(t),W.items=W.items.concat(t)):(P(t),W.items.push(t)),z(),Z}function n(t){return arguments.length?(d3.select(window).on("resize",t!==!1?S:null),W.isAutoResize=t,Z):W.isAutoResize}function a(t,e){switch(t){case"startDrag":W.startDrag.push(e);break;case"moveDrag":W.moveDrag.push(e);break;case"endDrag":W.endDrag.push(e);break;case"doubleClick":W.doubleClick.push(e)}return Z}function r(){var t=W.lanes.length,e=m(),n=p();M=d3.select(W.renderTo).append("svg").attr("width",W.width).attr("height",W.height).attr("class","gantt-chart"),M.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",e).attr("height",n),q=d3.behavior.drag().on("dragstart",function(t){o(this,t);for(var e=0;e<W.startDrag.length;e++)W.startDrag[e](this,t)}).on("drag",function(t){s(this,t);for(var e=0;e<W.moveDrag.length;e++)W.moveDrag[e](this,t)}).on("dragend",function(t){l(this,t);for(var e=0;e<W.endDrag.length;e++)W.endDrag[e](this,t)}),O=M.append("g").attr("transform","translate("+W.margin.left+","+W.margin.top+")").attr("width",e).attr("height",n).attr("class","main"),_=d3.select("body").append("div").attr("class","gantt-tooltip").style("opacity",0),K=d3.time.scale().domain(v()).range([0,e]),U=d3.scale.linear().domain([0,t]).range([0,n]),J=d3.svg.axis().scale(K).orient("bottom").ticks(W.duration),Q=d3.svg.axis().scale(U).orient("left").ticks(t).tickFormat(""),V=d3.behavior.zoom().x(K),O.append("g").attr("transform","translate(0,"+n+")").attr("class","main axis date").call(J),O.append("g").attr("class","main axis lane").call(Q),B=O.append("g").attr("clip-path","url(#clip)"),O.append("g").attr("class","laneLabels"),M.call(V),d3.select("html").on("click",function(t){W.isEnableTooltip&&(event.target.closest("svg rect")||b())})}function i(t){var e=parseFloat(d3.select(this).attr("x")),n=parseFloat(d3.select(this).attr("width")),a=e+n;e+W.margin.left+at>=d3.event.x||a+W.margin.left-5<=d3.event.x?d3.select(this).attr("class",void 0===t["class"]?"success"+(W.isEnableItemResize?" cursor-resize":" cursor-default"):t["class"]+(W.isEnableItemResize?" cursor-resize":" cursor-default")):d3.select(this).attr("class",void 0===t["class"]?"success"+(W.isEnableDrag?" cursor-move":" cursor-default"):t["class"]+(W.isEnableDrag?" cursor-move":" cursor-default"))}function s(t,e){var n=parseFloat(d3.select(t).attr("x")),a=parseFloat(d3.select(t).attr("y")),r=parseFloat(d3.select(t).attr("width")),i=n+r,s=d3.select(t).attr("id"),l=parseFloat(d3.select("#text-"+s).attr("x"));if(W.isEnableItemResize&&e.isResize){if(n+at>=d3.event.x&&n<=i-at)return e.start=Date.parse(K.invert(n+d3.event.dx)),R(e),d3.select(t).attr("x",n+d3.event.dx).attr("width",r-d3.event.dx),void d3.select("#text-"+s).attr("x",n+(r+d3.event.dx)/2).attr("width",(r+d3.event.dx)/2);if(i-at<=d3.event.x&&n+5<=i)return e.end=Date.parse(K.invert(parseFloat(r+d3.event.dx)+parseFloat(n))),R(e),d3.select(t).attr("width",r+d3.event.dx),void d3.select("#text-"+s).attr("x",n+(r+d3.event.dx)/2).attr("width",(r+d3.event.dx)/2)}W.isEnableDrag&&e.isMove&&(e.start=Date.parse(K.invert(n+d3.event.dx)),e.end=Date.parse(K.invert(parseFloat(r+d3.event.dx)+parseFloat(n))),R(e),d3.select(t).attr("x",n+d3.event.dx).attr("y",a+d3.event.dy),d3.select("#text-"+s).attr("x",l+d3.event.dx).attr("y",a+W.itemHeight/2+d3.event.dy))}function l(t,e){if(W.isEnableDrag||W.isEnableItemResize){var n=d3.select(t),a=Math.floor(U.invert(n.attr("y"))),r=n.attr("x"),i=n.attr("id");a>=W.lanes.length&&(a=W.lanes.length-1),a<0&&(a=0),delete e.isResize,delete e.isMove,n.attr("y",U(a)),d3.select("#text-"+i).attr("y",U(a)+W.itemHeight/2),e.lane=a,e.start=Date.parse(K.invert(parseFloat(r))),e.end=Date.parse(K.invert(parseFloat(n.attr("width"))+parseFloat(r))),b(),j(),T()}}function o(t,e){if(W.isEnableDrag||W.isEnableItemResize){var n=d3.select(t).attr("class");n.includes("cursor-resize")?e.isResize=!0:n.includes("cursor-move")&&(e.isMove=!0),e.oldStart=e.start,e.oldEnd=e.end,d3.event.sourceEvent.stopPropagation()}}function d(t,e){var n;for(n in e)t.hasOwnProperty(n)&&($.call(e[n])===et?d(t[n],e[n]):t[n]=e[n])}function c(t){return arguments.length?(W.isEnableDrag=t,T(),Z):W.isEnableDrag}function u(t){return arguments.length?(W.isEnableItemResize=t,T(),Z):W.isEnableItemResize}function h(t){return arguments.length?(W.isEnableTooltip=t,T(),Z):W.isEnableTooltip}function g(t){return arguments.length?(V.on("zoom",t?T:null),W.isEnableZoom=t,Z):W.isEnableZoom}function f(){return W.lanes.length}function m(){return W.width-W.margin.right-W.margin.left}function p(){return W.height-W.margin.top-W.margin.bottom}function v(){return[W.startTime||d3.min(W.items,function(t){return t.start}),W.endTime||d3.max(W.items,function(t){return t.end})]}function b(){_.transition().duration(500).style("opacity",0).style("display","none")}function x(t){var e=$.call(t);return arguments.length?(e!==tt&&C("Expected array. Got: "+e),Y(t),W.items=t,z(),Z):W.items}function w(t){var e=$.call(t);return arguments.length?(e!==tt&&C("Expected array. Got: "+e),W.lanes=t,W.lanes.length=f()||W.lanes.length,L(!W.isShowLaneLabel),L(!W.isShowLaneLabel),Z):W.lanes}function y(t){var e=$.call(t);return arguments.length?(e!==nt&&C("Expected String. Got: "+e),W.lanes.push(t),E(),Z):W.lanes}function D(t){var e=" margin value is incorrect. All values should be numbers";return arguments.length?(void 0!==t.top&&(isNaN(t.top)&&C("'Top'"+e),W.margin.top=parseInt(t.top),O.attr("transform","translate("+W.margin.left+","+W.margin.top+")")),void 0!==t.right&&(isNaN(t.right)&&C("'Right'"+e),W.margin.right=parseInt(t.right)),void 0!==t.bottom&&(isNaN(t.bottom)&&C("'Bottom'"+e),W.margin.bottom=parseInt(t.bottom)),void 0!==t.left&&(isNaN(t.left)&&C("'Left'"+e),W.margin.left=parseInt(t.left),O.attr("transform","translate("+W.margin.left+","+W.margin.top+")")),S(),Z):W.margin}function E(){var t=f();K.domain(v()),Q.ticks(t),U.domain([0,t]),V.x(K),L(!W.isShowLaneLabel),L(!W.isShowLaneLabel),j(),T()}function z(){var t=f();W.lanes.length=t,K.domain(v()),Q.ticks(t),U.domain([0,t]),V.x(K),T(),T(),j()}function T(){var t;t=B.selectAll("rect").data(W.items).attr("id",function(t){return t.id}).attr("x",function(t){return K(t.start)}).attr("y",function(t){return t.lane>W.lanes.length-1&&(t.lane=W.lanes.length-1),W.sublanes<2?U(t.lane):U(t.lane)+t.sublane*W.itemHeight}).attr("width",function(t){return K(t.end)-K(t.start)}).attr("height",W.itemHeight).attr("class",function(t){return void 0===t["class"]?"success":t["class"]}).call(q).on("dblclick",function(t){for(var e=0;e<W.endDrag.length;e++)W.doubleClick[e](this,t);d3.event.stopPropagation()}).on("mouseover",W.isEnableTooltip?R:null).on("mouseleave",W.isEnableTooltip?b:null).on("mousemove",i),t.enter().append("rect"),t.exit().remove();var e=B.selectAll("text").data(W.items).text(function(t){return t.label}).attr("id",function(t){return"text-"+t.id}).attr("x",function(t){return K(t.start)+(K(t.end)-K(t.start))/2}).attr("y",function(t){return t.lane>W.lanes.length-1&&(t.lane=W.lanes.length-1),W.sublanes<2?U(t.lane)+W.itemHeight/2:U(t.lane)+t.sublane*W.itemHeight+W.itemHeight/2}).attr("font-size",11).attr("text-anchor","middle").attr("text-height",20).attr("fill",function(t){return void 0===t.fillTitle?"#fff main":t.fillTitle+" main"});e.enter().append("text"),e.exit().remove(),O.select("g.main.axis.date").call(J),O.select("g.main.axis.lane").call(Q),b()}function S(){W.isAutoResize&&(W.width=parseInt(d3.select(W.renderTo).style("width")),W.height=parseInt(d3.select(W.renderTo).style("height")));var t=m(),e=p();K.range([0,t]),U.range([0,e]),M.attr("width",W.width),M.attr("height",W.height),M.select("defs").select("clipPath").select("rect").attr("width",t),M.select("defs").select("clipPath").select("rect").attr("height",t),O.attr("width",t),O.attr("height",e),O.select("g.main.axis.date").attr("transform","translate(0,"+p()+")"),O.select("g.laneLabels").selectAll(".laneText").data(W.lanes).attr("y",function(t,e){return U(e+.5)}),V.x(K),k(W.isShowYGrid),G(W.isShowYGrid),T()}function L(t){return arguments.length?(W.isShowLaneLabel=t,t===!1?O.selectAll(".laneText").remove():O.select("g.laneLabels").selectAll(".laneText").data(W.lanes).enter().append("text").text(function(t){return t}).attr("id",function(t,e){return"lane-"+e}).attr("x",-W.margin.left).attr("y",function(t,e){return U(e+.5)}).attr("dy",".5ex").attr("text-anchor","start").attr("class","laneText"),Z):W.isShowLaneLabel}function I(t){P(t,"update");var e=W.items.filter(function(e){return e.id===t.id})[0];void 0===e&&C("This item not found"),d(e,t),z()}function R(t){d3.event.defaultPrevented||(_.style("display","block").transition().duration(200).style("opacity",.9),_.html("function"==typeof t.tooltip?t.tooltip():t.tooltip).style("left",d3.event.pageX+"px").style("top",d3.event.pageY+"px"))}function k(t){if(!arguments.length)return W.isShowXGrid;var e=t!==!1?-p():-6;return J.tickSize(e,0,0),W.isShowXGrid=t,O.select("g.main.axis.date").call(J),Z}function G(t){if(!arguments.length)return W.isShowYGrid;var e=t!==!1?-m():-6;return Q.tickSize(e,0,0),W.isShowYGrid=t,O.select("g.main.axis.lane").call(Q),Z}function A(t,e){return arguments.length?(W.width=parseInt(t)||W.width,W.height=parseInt(e)||W.height,n(!1),S(),Z):[W.width,W.height]}function F(t){return arguments.length?(W.sublanes=t,T(),Z):W.sublanes}function N(t){return W.items.filter(function(e){return e.lane==t})}function H(){var t={max:0,lanes:[]};return d3.max(W.items,function(e){e.sublane+1>t.max&&(t.max=e.sublane+1)}),t.lanes=W.items.filter(function(e){return e.sublane==t.max-1}).map(function(t){return t.lane}),t}function Y(t){for(var e=0;e<t.length;e++){var n=t[e];P(n)}}function P(t,e){"update"!==e&&(void 0===t.sublane&&(t.sublane=0),void 0===t["class"]&&(t["class"]="success"));var n=new Date(t.start),a=new Date(t.end),r=W.items.filter(function(e){return e.id===t.id});void 0===t.id&&C("Id required"),void 0===t.lane&&C("Lane required"),r.length>1&&C("Id: "+r[0].id+" expected unique"),n instanceof Date&&!isNaN(n)||C("Start date expected Date"),a instanceof Date&&!isNaN(a)||C("End date expected Date")}function j(){X();var t=H();A(W.width,t.max*W.itemHeight*W.lanes.length+W.margin.top+W.margin.bottom),F(t.max)}function X(){for(var t=0;t<W.lanes.length;t++)for(var e=W.items.filter(function(e){return e.lane==t}),n=0;n<e.length;n++){var a=e[n],r=W.items.find(function(t){return t.id===a.id});r.sublane=n}}function C(t){throw TypeError(t)}var Z,M,q,O,B,_,J,K,Q,U,V,W={},$=Object.prototype.toString,tt="[object Array]",et="[object Object]",nt="[object String]",at=15;return Z={addItems:e,autoresize:n,enableDrag:c,enableItemResize:u,enabvarooltip:h,enableZoom:g,attachEvent:a,items:x,addLanes:y,lanes:w,margin:D,showLaneLabel:L,showXGrid:k,showYGrid:G,size:A,sublanes:F,getItemsByLane:N,updateItems:I,redraw:T,resize:S,chart:function(){return O},svg:function(){return M},renderTo:function(){return W.renderTo},xAxis:function(){return J},xScale:function(){return K},yScale:function(){return U},yAxis:function(){return Q},zoom:function(){return V}},W.items=null,W.lanes=null,W.renderTo="#gantt_chart",W.sublanes=1,W.startTime=null,W.endTime=null,W.isAutoResize=!0,W.isEnableDrag=!0,W.isEnableItemResize=!0,W.isEnableTooltip=!0,W.isEnableZoom=!0,W.isShowXGrid=!0,W.isShowYGrid=!0,W.isShowLaneLabel=!0,W.duration=20,W.startDrag=[],W.moveDrag=[],W.endDrag=[],W.doubleClick=[],W.height=null,W.width=null,W.itemHeight=35,W.margin={top:20,right:15,bottom:20,left:20},function(){d(W,t),W.items=W.items||[],W.lanes=W.lanes||[],W.lanes.length=f(),null===W.height&&(W.height=parseInt(d3.select(W.renderTo).style("height"))||480),null===W.width&&(W.width=parseInt(d3.select(W.renderTo).style("width"))||640),r(),n(W.isAutoResize),c(W.isEnableDrag),h(W.isEnableTooltip),g(W.isEnableZoom),L(W.isShowLaneLabel),k(W.isShowXGrid),G(W.isShowYGrid),j(),T()}(),Z};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbnR0LWNoYXJ0LmpzIl0sIm5hbWVzIjpbImdhbnR0Q2hhcnQiLCJjb25mIiwiYWRkSXRlbXMiLCJuZXdJdGVtcyIsIml0ZW1zVHlwZSIsInRvU3RyIiwiY2FsbCIsImFzdHIiLCJvc3RyIiwidGhyb3dFcnJvciIsImNoZWNrUmVxdWlyZUl0ZW1GaWVsZCIsInNlbGYiLCJpdGVtcyIsImNvbmNhdCIsInJlcXVpcmVJdGVtRmllbGQiLCJwdXNoIiwib25JdGVtc0NoYW5nZSIsImFwaSIsImF1dG9yZXNpemUiLCJpc0F1dG9SZXNpemUiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJkMyIsInNlbGVjdCIsIndpbmRvdyIsIm9uIiwicmVzaXplIiwiYXR0YWNoRXZlbnQiLCJldmVudCIsImNhbGxiYWNrIiwic3RhcnREcmFnIiwibW92ZURyYWciLCJlbmREcmFnIiwiZG91YmxlQ2xpY2siLCJidWlsZCIsImxhbmVMZW5ndGgiLCJsYW5lcyIsIm1hcmdpbldpZHRoIiwiZ2V0TWFyZ2luV2lkdGgiLCJtYXJnaW5IZWlnaHQiLCJnZXRNYXJnaW5IZWlnaHQiLCJjaGFydCIsInJlbmRlclRvIiwiYXBwZW5kIiwiYXR0ciIsIndpZHRoIiwiaGVpZ2h0IiwiZHJhZyIsImJlaGF2aW9yIiwiZCIsImRyYWdzdGFydCIsInRoaXMiLCJpIiwiZHJhZ21vdmUiLCJkcmFnZW5kIiwibWFpbiIsIm1hcmdpbiIsImxlZnQiLCJ0b3AiLCJ0b29sdGlwRGl2Iiwic3R5bGUiLCJ4U2NhbGUiLCJ0aW1lIiwic2NhbGUiLCJkb21haW4iLCJnZXRUaW1lRG9tYWluIiwicmFuZ2UiLCJ5U2NhbGUiLCJsaW5lYXIiLCJ4QXhpcyIsInN2ZyIsImF4aXMiLCJvcmllbnQiLCJ0aWNrcyIsImR1cmF0aW9uIiwieUF4aXMiLCJ0aWNrRm9ybWF0Iiwiem9vbSIsIngiLCJpdGVtUmVjdHMiLCJpc0VuYWJsZVRvb2x0aXAiLCJ0YXJnZXQiLCJjbG9zZXN0IiwiaGlkZVRvb2x0aXAiLCJjaGFuZ2VDdXJzb3IiLCJwYXJzZUZsb2F0IiwieDEiLCJyZXNpemVSZWN0TWFyZ2luIiwidW5kZWZpbmVkIiwidGhpc0VsIiwieSIsImlkIiwieFRleHQiLCJpc0VuYWJsZUl0ZW1SZXNpemUiLCJpc1Jlc2l6ZSIsInN0YXJ0IiwiRGF0ZSIsInBhcnNlIiwiaW52ZXJ0IiwiZHgiLCJzaG93VG9vbHRpcCIsImVuZCIsImlzRW5hYmxlRHJhZyIsImlzTW92ZSIsImR5IiwiaXRlbUhlaWdodCIsImVsIiwibGFuZSIsIk1hdGgiLCJmbG9vciIsInJlbmRlclN1YmxhbmUiLCJyZWRyYXciLCJjdXJzb3IiLCJpbmNsdWRlcyIsIm9sZFN0YXJ0Iiwib2xkRW5kIiwic291cmNlRXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJjb3B5U2FtZVByb3AiLCJjb3B5VG8iLCJjb3B5RnJvbSIsInAiLCJoYXNPd25Qcm9wZXJ0eSIsImVuYWJsZURyYWciLCJlbmFibGVJdGVtUmVzaXplIiwiZW5hYmxlVG9vbHRpcCIsImVuYWJsZVpvb20iLCJpc0VuYWJsZVpvb20iLCJnZXRMYW5lTGVuZ3RoIiwicmlnaHQiLCJib3R0b20iLCJzdGFydFRpbWUiLCJtaW4iLCJlbmRUaW1lIiwibWF4IiwidHJhbnNpdGlvbiIsIm5ld0xhbmVzIiwibGFuZXNUeXBlIiwic2hvd0xhbmVMYWJlbCIsImlzU2hvd0xhbmVMYWJlbCIsImFkZExhbmVzIiwibmV3TGFuZSIsImxhbmVUeXBlIiwic3N0ciIsIm9uTGFuZXNDaGFuZ2UiLCJuZXdNYXJnaW4iLCJtc2ciLCJpc05hTiIsInBhcnNlSW50IiwicmVjdHMiLCJzZWxlY3RBbGwiLCJkYXRhIiwic3VibGFuZXMiLCJzdWJsYW5lIiwiZW50ZXIiLCJleGl0IiwicmVtb3ZlIiwidGV4dHMiLCJ0ZXh0IiwibGFiZWwiLCJmaWxsVGl0bGUiLCJzaG93WEdyaWQiLCJpc1Nob3dZR3JpZCIsInNob3dZR3JpZCIsImluZGV4IiwidXBkYXRlSXRlbXMiLCJuZXdJdGVtIiwib2xkSXRlbSIsImZpbHRlciIsIm9iaiIsImRlZmF1bHRQcmV2ZW50ZWQiLCJodG1sIiwidG9vbHRpcCIsImlzU2hvd1hHcmlkIiwidGlja1NpemUiLCJzaXplIiwibmV3U3VibGFuZXMiLCJnZXRJdGVtc0J5TGFuZSIsIml0ZW0iLCJnZXRNYXhTdWJsYW5lIiwibWF4U3VibGFuZSIsIm1hcCIsInR5cGUiLCJzdGFydERhdGUiLCJlbmREYXRlIiwiaWRzIiwic2VwYXJhdGVTdWJsYW5lIiwibCIsIml0ZW1MYW5lcyIsIml0ZW1DaGFuZ2UiLCJmaW5kIiwiVHlwZUVycm9yIiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJlbmFidmFyb29sdGlwIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUVBLElBQUlBLFlBQWEsU0FBU0MsR0FrR3RCLFFBQVNDLEdBQVNDLEdBQ2QsR0FBSUMsR0FBWUMsRUFBTUMsS0FBS0gsRUFZM0IsT0FYSUMsS0FBY0csSUFBUUgsSUFBY0ksSUFBTUMsRUFBVyxrQ0FBb0NMLEdBQzFGQSxJQUFjRyxJQUNiRyxFQUFzQlAsR0FDdEJRLEVBQUtDLE1BQVFELEVBQUtDLE1BQU1DLE9BQU9WLEtBSS9CVyxFQUFpQlgsR0FDakJRLEVBQUtDLE1BQU1HLEtBQUtaLElBRXBCYSxJQUNPQyxFQUdYLFFBQVNDLEdBQVdDLEdBQ2hCLE1BQUtDLFdBQVVDLFFBQ2ZDLEdBQUdDLE9BQU9DLFFBQVFDLEdBQUcsU0FBV04sS0FBaUIsRUFBU08sRUFBUyxNQUNuRWYsRUFBS1EsYUFBZUEsRUFDYkYsR0FIdUJOLEVBQUtRLGFBTXZDLFFBQVNRLEdBQVlDLEVBQU9DLEdBQ3hCLE9BQU9ELEdBQ0gsSUFBSyxZQUNEakIsRUFBS21CLFVBQVVmLEtBQUtjLEVBQ3BCLE1BQ0osS0FBSyxXQUNEbEIsRUFBS29CLFNBQVNoQixLQUFLYyxFQUNuQixNQUNKLEtBQUssVUFDRGxCLEVBQUtxQixRQUFRakIsS0FBS2MsRUFDbEIsTUFDSixLQUFLLGNBQ0RsQixFQUFLc0IsWUFBWWxCLEtBQUtjLEdBRzlCLE1BQU9aLEdBR1gsUUFBU2lCLEtBQ0wsR0FBSUMs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aWxlIjoiZ2FudHQtY2hhcnQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGdhbnR0Q2hhcnQgPSBmdW5jdGlvbihjb25mKSB7XHJcbiAgICB2YXIgYXBpLFxyXG4gICAgICAgIHNlbGYgPSB7fSxcclxuICAgICAgICB0b1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsXHJcbiAgICAgICAgYXN0ciA9IFwiW29iamVjdCBBcnJheV1cIixcclxuICAgICAgICBvc3RyID0gXCJbb2JqZWN0IE9iamVjdF1cIixcclxuICAgICAgICBzc3RyID0gXCJbb2JqZWN0IFN0cmluZ11cIixcclxuICAgICAgICBjaGFydCwgZHJhZywgbWFpbiwgaXRlbVJlY3RzLCB0b29sdGlwRGl2LCB4QXhpcywgeFNjYWxlLCB5QXhpcywgeVNjYWxlLCB6b29tLFxyXG4gICAgICAgIHJlc2l6ZVJlY3RNYXJnaW4gPSAxNTtcclxuXHJcbiAgICBhcGkgPSB7XHJcbiAgICAgICAgYWRkSXRlbXM6IGFkZEl0ZW1zLFxyXG4gICAgICAgIGF1dG9yZXNpemU6IGF1dG9yZXNpemUsXHJcbiAgICAgICAgZW5hYmxlRHJhZzogZW5hYmxlRHJhZyxcclxuICAgICAgICBlbmFibGVJdGVtUmVzaXplOiBlbmFibGVJdGVtUmVzaXplLFxyXG4gICAgICAgIGVuYWJ2YXJvb2x0aXA6IGVuYWJsZVRvb2x0aXAsXHJcbiAgICAgICAgZW5hYmxlWm9vbTogZW5hYmxlWm9vbSxcclxuICAgICAgICBhdHRhY2hFdmVudDogYXR0YWNoRXZlbnQsXHJcbiAgICAgICAgaXRlbXM6IGl0ZW1zLFxyXG4gICAgICAgIGFkZExhbmVzOiBhZGRMYW5lcyxcclxuICAgICAgICBsYW5lczogbGFuZXMsXHJcbiAgICAgICAgbWFyZ2luOiBtYXJnaW4sXHJcbiAgICAgICAgc2hvd0xhbmVMYWJlbDogc2hvd0xhbmVMYWJlbCxcclxuICAgICAgICBzaG93WEdyaWQ6IHNob3dYR3JpZCxcclxuICAgICAgICBzaG93WUdyaWQ6IHNob3dZR3JpZCxcclxuICAgICAgICBzaXplOiBzaXplLFxyXG4gICAgICAgIHN1YmxhbmVzOiBzdWJsYW5lcyxcclxuICAgICAgICBnZXRJdGVtc0J5TGFuZTogZ2V0SXRlbXNCeUxhbmUsXHJcbiAgICAgICAgdXBkYXRlSXRlbXM6IHVwZGF0ZUl0ZW1zLFxyXG4gICAgICAgIHJlZHJhdzogcmVkcmF3LFxyXG4gICAgICAgIHJlc2l6ZTogcmVzaXplLFxyXG4gICAgICAgIC8vIGRyYWc6IGZ1bmN0aW9uKCkgeyByZXR1cm4gZHJhZyB9LFxyXG4gICAgICAgIGNoYXJ0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1haW4gfSxcclxuICAgICAgICBzdmc6IGZ1bmN0aW9uKCkgeyByZXR1cm4gY2hhcnQgfSxcclxuICAgICAgICByZW5kZXJUbzogZnVuY3Rpb24oKSB7IHJldHVybiBzZWxmLnJlbmRlclRvIH0sXHJcbiAgICAgICAgeEF4aXM6IGZ1bmN0aW9uKCkgeyByZXR1cm4geEF4aXMgfSxcclxuICAgICAgICB4U2NhbGU6IGZ1bmN0aW9uKCkgeyByZXR1cm4geFNjYWxlIH0sXHJcbiAgICAgICAgeVNjYWxlOiBmdW5jdGlvbigpIHsgcmV0dXJuIHlTY2FsZSB9LFxyXG4gICAgICAgIHlBeGlzOiBmdW5jdGlvbigpIHsgcmV0dXJuIHlBeGlzIH0sXHJcbiAgICAgICAgem9vbTogZnVuY3Rpb24oKSB7IHJldHVybiB6b29tIH0sXHJcbiAgICB9O1xyXG5cclxuICAgIHNlbGYuaXRlbXMgPSBudWxsO1xyXG4gICAgc2VsZi5sYW5lcyA9IG51bGw7XHJcbiAgICBzZWxmLnJlbmRlclRvID0gJyNnYW50dF9jaGFydCc7XHJcbiAgICBzZWxmLnN1YmxhbmVzID0gMTtcclxuXHJcbiAgICBzZWxmLnN0YXJ0VGltZSA9IG51bGw7XHJcbiAgICBzZWxmLmVuZFRpbWUgPSBudWxsO1xyXG5cclxuICAgIHNlbGYuaXNBdXRvUmVzaXplID0gdHJ1ZTtcclxuICAgIHNlbGYuaXNFbmFibGVEcmFnID0gdHJ1ZTtcclxuICAgIHNlbGYuaXNFbmFibGVJdGVtUmVzaXplID0gdHJ1ZTtcclxuICAgIHNlbGYuaXNFbmFibGVUb29sdGlwID0gdHJ1ZTtcclxuICAgIHNlbGYuaXNFbmFibGVab29tID0gdHJ1ZTtcclxuICAgIHNlbGYuaXNTaG93WEdyaWQgPSB0cnVlO1xyXG4gICAgc2VsZi5pc1Nob3dZR3JpZCA9IHRydWU7XHJcbiAgICBzZWxmLmlzU2hvd0xhbmVMYWJlbCA9IHRydWU7XHJcbiAgICBzZWxmLmR1cmF0aW9uID0gMjA7XHJcblxyXG4gICAgc2VsZi5zdGFydERyYWcgPSBbXTtcclxuICAgIHNlbGYubW92ZURyYWcgPSBbXTtcclxuICAgIHNlbGYuZW5kRHJhZyA9IFtdO1xyXG4gICAgc2VsZi5kb3VibGVDbGljayA9IFtdO1xyXG5cclxuICAgIHNlbGYuaGVpZ2h0ID0gbnVsbDtcclxuICAgIHNlbGYud2lkdGggPSBudWxsO1xyXG4gICAgc2VsZi5pdGVtSGVpZ2h0ID0gMzU7XHJcbiAgICBzZWxmLm1hcmdpbiA9IHtcclxuICAgICAgICB0b3A6IDIwLFxyXG4gICAgICAgIHJpZ2h0OiAxNSxcclxuICAgICAgICBib3R0b206IDIwLFxyXG4gICAgICAgIGxlZnQ6IDIwXHJcbiAgICB9O1xyXG5cclxuICAgIChmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgICAgIGNvcHlTYW1lUHJvcChzZWxmLCBjb25mKTtcclxuXHJcbiAgICAgICAgc2VsZi5pdGVtcyA9IHNlbGYuaXRlbXMgfHwgW107XHJcbiAgICAgICAgc2VsZi5sYW5lcyA9IHNlbGYubGFuZXMgfHwgW107XHJcbiAgICAgICAgc2VsZi5sYW5lcy5sZW5ndGggPSBnZXRMYW5lTGVuZ3RoKCk7XHJcblxyXG4gICAgICAgIGlmIChzZWxmLmhlaWdodCA9PT0gbnVsbCkgc2VsZi5oZWlnaHQgPSBwYXJzZUludChkMy5zZWxlY3Qoc2VsZi5yZW5kZXJUbykuc3R5bGUoJ2hlaWdodCcpKSB8fCA0ODA7XHJcbiAgICAgICAgaWYgKHNlbGYud2lkdGggPT09IG51bGwpIHNlbGYud2lkdGggPSBwYXJzZUludChkMy5zZWxlY3Qoc2VsZi5yZW5kZXJUbykuc3R5bGUoJ3dpZHRoJykpIHx8IDY0MDtcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBidWlsZCgpO1xyXG4gICAgICAgIGF1dG9yZXNpemUoc2VsZi5pc0F1dG9SZXNpemUpO1xyXG4gICAgICAgIGVuYWJsZURyYWcoc2VsZi5pc0VuYWJsZURyYWcpO1xyXG4gICAgICAgIGVuYWJsZVRvb2x0aXAoc2VsZi5pc0VuYWJsZVRvb2x0aXApO1xyXG4gICAgICAgIGVuYWJsZVpvb20oc2VsZi5pc0VuYWJsZVpvb20pO1xyXG4gICAgICAgIHNob3dMYW5lTGFiZWwoc2VsZi5pc1Nob3dMYW5lTGFiZWwpO1xyXG4gICAgICAgIHNob3dYR3JpZChzZWxmLmlzU2hvd1hHcmlkKTtcclxuICAgICAgICBzaG93WUdyaWQoc2VsZi5pc1Nob3dZR3JpZCk7XHJcbiAgICAgICAgcmVuZGVyU3VibGFuZSgpOyAgICAgICAgXHJcbiAgICAgICAgcmVkcmF3KCk7XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGFkZEl0ZW1zKG5ld0l0ZW1zKSB7XHJcbiAgICAgICAgdmFyIGl0ZW1zVHlwZSA9IHRvU3RyLmNhbGwobmV3SXRlbXMpO1xyXG4gICAgICAgIGlmIChpdGVtc1R5cGUgIT09IGFzdHIgJiYgaXRlbXNUeXBlICE9PSBvc3RyKSB0aHJvd0Vycm9yKCdFeHBlY3RlZCBvYmplY3Qgb3IgYXJyYXkuIEdvdDogJyArIGl0ZW1zVHlwZSk7XHJcbiAgICAgICAgaWYoaXRlbXNUeXBlID09PSBhc3RyKSB7XHJcbiAgICAgICAgICAgIGNoZWNrUmVxdWlyZUl0ZW1GaWVsZChuZXdJdGVtcyk7XHJcbiAgICAgICAgICAgIHNlbGYuaXRlbXMgPSBzZWxmLml0ZW1zLmNvbmNhdChuZXdJdGVtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJlcXVpcmVJdGVtRmllbGQobmV3SXRlbXMpO1xyXG4gICAgICAgICAgICBzZWxmLml0ZW1zLnB1c2gobmV3SXRlbXMpO1xyXG4gICAgICAgIH0gXHJcbiAgICAgICAgb25JdGVtc0NoYW5nZSgpO1xyXG4gICAgICAgIHJldHVybiBhcGk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYXV0b3Jlc2l6ZShpc0F1dG9SZXNpemUpIHtcclxuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzZWxmLmlzQXV0b1Jlc2l6ZTtcclxuICAgICAgICBkMy5zZWxlY3Qod2luZG93KS5vbigncmVzaXplJywgKGlzQXV0b1Jlc2l6ZSAhPT0gZmFsc2UpID8gcmVzaXplIDogbnVsbCk7XHJcbiAgICAgICAgc2VsZi5pc0F1dG9SZXNpemUgPSBpc0F1dG9SZXNpemU7XHJcbiAgICAgICAgcmV0dXJuIGFwaTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhdHRhY2hFdmVudChldmVudCwgY2FsbGJhY2spIHtcclxuICAgICAgICBzd2l0Y2goZXZlbnQpIHtcclxuICAgICAgICAgICAgY2FzZSBcInN0YXJ0RHJhZ1wiOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5zdGFydERyYWcucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIm1vdmVEcmFnXCI6XHJcbiAgICAgICAgICAgICAgICBzZWxmLm1vdmVEcmFnLnB1c2goY2FsbGJhY2spOyAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJlbmREcmFnXCI6XHJcbiAgICAgICAgICAgICAgICBzZWxmLmVuZERyYWcucHVzaChjYWxsYmFjayk7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJkb3VibGVDbGlja1wiOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5kb3VibGVDbGljay5wdXNoKGNhbGxiYWNrKTsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFwaTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBidWlsZCgpIHtcclxuICAgICAgICB2YXIgbGFuZUxlbmd0aCA9IHNlbGYubGFuZXMubGVuZ3RoLFxyXG4gICAgICAgICAgICBtYXJnaW5XaWR0aCA9IGdldE1hcmdpbldpZHRoKCksXHJcbiAgICAgICAgICAgIG1hcmdpbkhlaWdodCA9IGdldE1hcmdpbkhlaWdodCgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICBjaGFydCA9IGQzLnNlbGVjdChzZWxmLnJlbmRlclRvKVxyXG4gICAgICAgICAgICAuYXBwZW5kKFwic3ZnXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgc2VsZi53aWR0aClcclxuICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgc2VsZi5oZWlnaHQpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJnYW50dC1jaGFydFwiKTtcclxuXHJcbiAgICAgICAgY2hhcnQuYXBwZW5kKFwiZGVmc1wiKS5hcHBlbmQoXCJjbGlwUGF0aFwiKVxyXG4gICAgICAgICAgICAuYXR0cihcImlkXCIsIFwiY2xpcFwiKVxyXG4gICAgICAgICAgICAuYXBwZW5kKFwicmVjdFwiKVxyXG4gICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIG1hcmdpbldpZHRoKVxyXG4gICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCBtYXJnaW5IZWlnaHQpO1xyXG5cclxuICAgICAgICBkcmFnID0gZDMuYmVoYXZpb3IuZHJhZygpXHJcbiAgICAgICAgICAgIC5vbihcImRyYWdzdGFydFwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICBkcmFnc3RhcnQodGhpcywgZCk7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgc2VsZi5zdGFydERyYWcubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnN0YXJ0RHJhZ1tpXSh0aGlzLCBkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm9uKFwiZHJhZ1wiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICBkcmFnbW92ZSh0aGlzLCBkKTtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzZWxmLm1vdmVEcmFnLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5tb3ZlRHJhZ1tpXSh0aGlzLCBkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSApXHJcbiAgICAgICAgICAgIC5vbihcImRyYWdlbmRcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgZHJhZ2VuZCh0aGlzLCBkKTsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHNlbGYuZW5kRHJhZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZW5kRHJhZ1tpXSh0aGlzLCBkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1haW4gPSBjaGFydC5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgc2VsZi5tYXJnaW4ubGVmdCArIFwiLFwiICsgc2VsZi5tYXJnaW4udG9wICsgXCIpXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgbWFyZ2luV2lkdGgpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIG1hcmdpbkhlaWdodClcclxuICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcIm1haW5cIik7XHJcblxyXG4gICAgICAgIHRvb2x0aXBEaXYgPSBkMy5zZWxlY3QoXCJib2R5XCIpLmFwcGVuZChcImRpdlwiKVxyXG4gICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiZ2FudHQtdG9vbHRpcFwiKVxyXG4gICAgICAgICAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIDApO1xyXG5cclxuICAgICAgICB4U2NhbGUgPSBkMy50aW1lLnNjYWxlKClcclxuICAgICAgICAgICAgLmRvbWFpbihnZXRUaW1lRG9tYWluKCkpXHJcbiAgICAgICAgICAgIC5yYW5nZShbMCwgbWFyZ2luV2lkdGhdKTtcclxuXHJcbiAgICAgICAgeVNjYWxlID0gZDMuc2NhbGUubGluZWFyKClcclxuICAgICAgICAgICAgLmRvbWFpbihbMCwgbGFuZUxlbmd0aF0pXHJcbiAgICAgICAgICAgIC5yYW5nZShbMCwgbWFyZ2luSGVpZ2h0XSk7XHJcblxyXG4gICAgICAgIHhBeGlzID0gZDMuc3ZnLmF4aXMoKVxyXG4gICAgICAgICAgICAuc2NhbGUoeFNjYWxlKVxyXG4gICAgICAgICAgICAub3JpZW50KCdib3R0b20nKVxyXG4gICAgICAgICAgICAudGlja3Moc2VsZi5kdXJhdGlvbilcclxuXHJcbiAgICAgICAgeUF4aXMgPSBkMy5zdmcuYXhpcygpXHJcbiAgICAgICAgICAgIC5zY2FsZSh5U2NhbGUpXHJcbiAgICAgICAgICAgIC5vcmllbnQoJ2xlZnQnKVxyXG4gICAgICAgICAgICAudGlja3MobGFuZUxlbmd0aClcclxuICAgICAgICAgICAgLnRpY2tGb3JtYXQoXCJcIik7XHJcblxyXG4gICAgICAgIHpvb20gPSBkMy5iZWhhdmlvci56b29tKClcclxuICAgICAgICAgICAgLngoeFNjYWxlKTtcclxuXHJcbiAgICAgICAgbWFpbi5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCcgKyBtYXJnaW5IZWlnaHQgKyAnKScpXHJcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdtYWluIGF4aXMgZGF0ZScpXHJcbiAgICAgICAgICAgIC5jYWxsKHhBeGlzKVxyXG5cclxuICAgICAgICBtYWluLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdtYWluIGF4aXMgbGFuZScpXHJcbiAgICAgICAgICAgIC5jYWxsKHlBeGlzKTtcclxuICAgICAgICBcclxuICAgICAgICBpdGVtUmVjdHMgPSBtYWluLmFwcGVuZChcImdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGlwLXBhdGhcIiwgXCJ1cmwoI2NsaXApXCIpO1xyXG5cclxuICAgICAgICBtYWluLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsYW5lTGFiZWxzJyk7XHJcblxyXG4gICAgICAgIGNoYXJ0LmNhbGwoem9vbSk7XHJcblxyXG4gICAgICAgIGQzLnNlbGVjdCgnaHRtbCcpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICBpZiAoIXNlbGYuaXNFbmFibGVUb29sdGlwKSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmICghZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ3N2ZyByZWN0JykpIHtcclxuICAgICAgICAgICAgICAgIGhpZGVUb29sdGlwKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2hhbmdlQ3Vyc29yKGQpIHtcclxuICAgICAgICB2YXIgeCA9IHBhcnNlRmxvYXQoZDMuc2VsZWN0KHRoaXMpLmF0dHIoXCJ4XCIpKSxcclxuICAgICAgICAgICAgd2lkdGggPSBwYXJzZUZsb2F0KGQzLnNlbGVjdCh0aGlzKS5hdHRyKFwid2lkdGhcIikpLFxyXG4gICAgICAgICAgICB4MSA9IHggKyB3aWR0aCA7XHJcblxyXG4gICAgICAgIGlmICgoeCArIHNlbGYubWFyZ2luLmxlZnQgKyByZXNpemVSZWN0TWFyZ2luID49IGQzLmV2ZW50LngpIHx8ICh4MSArIHNlbGYubWFyZ2luLmxlZnQgLSA1IDw9IGQzLmV2ZW50LngpKSB7XHJcbiAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKFwiY2xhc3NcIiwgZC5jbGFzcyA9PT0gdW5kZWZpbmVkID8gJ3N1Y2Nlc3MnICsgKChzZWxmLmlzRW5hYmxlSXRlbVJlc2l6ZSkgPyBcIiBjdXJzb3ItcmVzaXplXCIgOiBcIiBjdXJzb3ItZGVmYXVsdFwiKSA6IGQuY2xhc3MgKyAoKHNlbGYuaXNFbmFibGVJdGVtUmVzaXplKSA/IFwiIGN1cnNvci1yZXNpemVcIiA6IFwiIGN1cnNvci1kZWZhdWx0XCIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKFwiY2xhc3NcIiwgZC5jbGFzcyA9PT0gdW5kZWZpbmVkID8gJ3N1Y2Nlc3MnICsgKChzZWxmLmlzRW5hYmxlRHJhZykgPyBcIiBjdXJzb3ItbW92ZVwiIDogXCIgY3Vyc29yLWRlZmF1bHRcIikgOiBkLmNsYXNzICsgKChzZWxmLmlzRW5hYmxlRHJhZykgPyBcIiBjdXJzb3ItbW92ZVwiIDogXCIgY3Vyc29yLWRlZmF1bHRcIikpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkcmFnbW92ZSh0aGlzRWwsIGQpIHtcclxuICAgICAgICB2YXIgeCA9IHBhcnNlRmxvYXQoZDMuc2VsZWN0KHRoaXNFbCkuYXR0cihcInhcIikpLFxyXG4gICAgICAgICAgICB5ID0gcGFyc2VGbG9hdChkMy5zZWxlY3QodGhpc0VsKS5hdHRyKFwieVwiKSksXHJcbiAgICAgICAgICAgIHdpZHRoID0gcGFyc2VGbG9hdChkMy5zZWxlY3QodGhpc0VsKS5hdHRyKFwid2lkdGhcIikpLFxyXG4gICAgICAgICAgICB4MSA9IHggKyB3aWR0aCxcclxuICAgICAgICAgICAgaWQgPSBkMy5zZWxlY3QodGhpc0VsKS5hdHRyKFwiaWRcIiksXHJcbiAgICAgICAgICAgIHhUZXh0ID0gIHBhcnNlRmxvYXQoZDMuc2VsZWN0KFwiI3RleHQtXCIgKyBpZCkuYXR0cihcInhcIikpO1xyXG5cclxuICAgICAgICBpZiAoc2VsZi5pc0VuYWJsZUl0ZW1SZXNpemUgJiYgZC5pc1Jlc2l6ZSkge1xyXG4gICAgICAgICAgICBpZiAoeCArIHJlc2l6ZVJlY3RNYXJnaW4gPj0gZDMuZXZlbnQueCAmJiB4IDw9IHgxIC0gcmVzaXplUmVjdE1hcmdpbikge1xyXG4gICAgICAgICAgICAgICAgZC5zdGFydCA9IERhdGUucGFyc2UoeFNjYWxlLmludmVydCh4ICsgZDMuZXZlbnQuZHgpKTtcclxuICAgICAgICAgICAgICAgIHNob3dUb29sdGlwKGQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzRWwpXHJcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIHggKyBkMy5ldmVudC5keClcclxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIHdpZHRoIC0gZDMuZXZlbnQuZHgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGQzLnNlbGVjdChcIiN0ZXh0LVwiICsgaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIHggKyAod2lkdGggKyBkMy5ldmVudC5keCkgLyAyKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgKHdpZHRoICsgZDMuZXZlbnQuZHgpIC8gMik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHgxIC0gcmVzaXplUmVjdE1hcmdpbiA8PSBkMy5ldmVudC54ICYmIHggKyA1IDw9IHgxKSB7XHJcbiAgICAgICAgICAgICAgIGQuZW5kID0gRGF0ZS5wYXJzZSh4U2NhbGUuaW52ZXJ0KHBhcnNlRmxvYXQod2lkdGggKyBkMy5ldmVudC5keCkgKyBwYXJzZUZsb2F0KHgpKSlcclxuICAgICAgICAgICAgICAgc2hvd1Rvb2x0aXAoZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXNFbClcclxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIHdpZHRoICsgZDMuZXZlbnQuZHgpO1xyXG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KFwiI3RleHQtXCIgKyBpZClcclxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgeCArICh3aWR0aCArIGQzLmV2ZW50LmR4KSAvIDIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCAod2lkdGggKyBkMy5ldmVudC5keCkgLyAyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2VsZi5pc0VuYWJsZURyYWcgJiYgZC5pc01vdmUpIHtcclxuICAgICAgICAgICAgZC5zdGFydCA9IERhdGUucGFyc2UoeFNjYWxlLmludmVydCh4ICsgZDMuZXZlbnQuZHgpKTtcclxuICAgICAgICAgICAgZC5lbmQgPSBEYXRlLnBhcnNlKHhTY2FsZS5pbnZlcnQocGFyc2VGbG9hdCh3aWR0aCArIGQzLmV2ZW50LmR4KSArIHBhcnNlRmxvYXQoeCkpKVxyXG4gICAgICAgICAgICBzaG93VG9vbHRpcChkKTtcclxuXHJcbiAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzRWwpXHJcbiAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgeCArIGQzLmV2ZW50LmR4KVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIHkgKyBkMy5ldmVudC5keSk7XHJcbiAgICAgICAgICAgIGQzLnNlbGVjdChcIiN0ZXh0LVwiICsgaWQpXHJcbiAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgeFRleHQgKyBkMy5ldmVudC5keClcclxuICAgICAgICAgICAgICAgIC5hdHRyKFwieVwiLCAoeSArIHNlbGYuaXRlbUhlaWdodC8yKSArIGQzLmV2ZW50LmR5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZHJhZ2VuZCh0aGlzRWwsIGQpIHtcclxuICAgICAgICBpZiAoIXNlbGYuaXNFbmFibGVEcmFnICYmICFzZWxmLmlzRW5hYmxlSXRlbVJlc2l6ZSkgcmV0dXJuO1xyXG4gICAgICAgIHZhciBlbCA9IGQzLnNlbGVjdCh0aGlzRWwpLFxyXG4gICAgICAgICAgICBsYW5lID0gTWF0aC5mbG9vcih5U2NhbGUuaW52ZXJ0KGVsLmF0dHIoXCJ5XCIpKSksXHJcbiAgICAgICAgICAgIHN0YXJ0ID0gZWwuYXR0cihcInhcIiksXHJcbiAgICAgICAgICAgIGlkID0gZWwuYXR0cihcImlkXCIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICBpZiAobGFuZSA+PSBzZWxmLmxhbmVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBsYW5lID0gc2VsZi5sYW5lcy5sZW5ndGggLSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGFuZSA8IDApIHtcclxuICAgICAgICAgICAgbGFuZSA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkZWxldGUgZC5pc1Jlc2l6ZTtcclxuICAgICAgICBkZWxldGUgZC5pc01vdmU7XHJcblxyXG4gICAgICAgIGVsLmF0dHIoXCJ5XCIsIHlTY2FsZShsYW5lKSk7XHJcbiAgICAgICAgZDMuc2VsZWN0KFwiI3RleHQtXCIgKyBpZCkuYXR0cihcInlcIiwgeVNjYWxlKGxhbmUpICsgc2VsZi5pdGVtSGVpZ2h0LzIpO1xyXG5cclxuICAgICAgICBkLmxhbmUgPSBsYW5lO1xyXG5cclxuICAgICAgICBkLnN0YXJ0ID0gRGF0ZS5wYXJzZSh4U2NhbGUuaW52ZXJ0KHBhcnNlRmxvYXQoc3RhcnQpKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZC5lbmQgPSBEYXRlLnBhcnNlKHhTY2FsZS5pbnZlcnQocGFyc2VGbG9hdChlbC5hdHRyKFwid2lkdGhcIikpICsgcGFyc2VGbG9hdChzdGFydCkpKTtcclxuICAgICAgICBcclxuICAgICAgICBoaWRlVG9vbHRpcCgpO1xyXG4gICAgICAgIHJlbmRlclN1YmxhbmUoKTtcclxuICAgICAgICByZWRyYXcoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZHJhZ3N0YXJ0KHRoaXNFbCwgZCkge1xyXG4gICAgICAgIGlmICghc2VsZi5pc0VuYWJsZURyYWcgJiYgIXNlbGYuaXNFbmFibGVJdGVtUmVzaXplKSByZXR1cm47XHJcbiAgICAgICAgdmFyIGN1cnNvciA9IGQzLnNlbGVjdCh0aGlzRWwpLmF0dHIoXCJjbGFzc1wiKTtcclxuICAgICAgICBpZihjdXJzb3IuaW5jbHVkZXMoXCJjdXJzb3ItcmVzaXplXCIpKSB7XHJcbiAgICAgICAgICAgIGQuaXNSZXNpemUgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoY3Vyc29yLmluY2x1ZGVzKFwiY3Vyc29yLW1vdmVcIikpIHtcclxuICAgICAgICAgICAgZC5pc01vdmUgPSB0cnVlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkLm9sZFN0YXJ0ID0gZC5zdGFydDtcclxuICAgICAgICBkLm9sZEVuZCA9IGQuZW5kO1xyXG4gICAgICAgIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNvcHlTYW1lUHJvcChjb3B5VG8sIGNvcHlGcm9tKSB7XHJcbiAgICAgICAgdmFyIHA7XHJcblxyXG4gICAgICAgIGZvciAocCBpbiBjb3B5RnJvbSkge1xyXG4gICAgICAgICAgICBpZiAoY29weVRvLmhhc093blByb3BlcnR5KHApKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodG9TdHIuY2FsbChjb3B5RnJvbVtwXSkgPT09IG9zdHIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb3B5U2FtZVByb3AoY29weVRvW3BdLCBjb3B5RnJvbVtwXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb3B5VG9bcF0gPSBjb3B5RnJvbVtwXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBlbmFibGVEcmFnKGlzRW5hYmxlRHJhZykge1xyXG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHNlbGYuaXNFbmFibGVEcmFnO1xyXG4gICAgICAgIHNlbGYuaXNFbmFibGVEcmFnID0gaXNFbmFibGVEcmFnO1xyXG4gICAgICAgIHJlZHJhdygpO1xyXG4gICAgICAgIHJldHVybiBhcGk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZW5hYmxlSXRlbVJlc2l6ZShpc0VuYWJsZUl0ZW1SZXNpemUpIHtcclxuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzZWxmLmlzRW5hYmxlSXRlbVJlc2l6ZTtcclxuICAgICAgICBzZWxmLmlzRW5hYmxlSXRlbVJlc2l6ZSA9IGlzRW5hYmxlSXRlbVJlc2l6ZTtcclxuICAgICAgICByZWRyYXcoKTtcclxuICAgICAgICByZXR1cm4gYXBpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGVuYWJsZVRvb2x0aXAoaXNFbmFibGVUb29sdGlwKSB7XHJcbiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gc2VsZi5pc0VuYWJsZVRvb2x0aXA7XHJcbiAgICAgICAgc2VsZi5pc0VuYWJsZVRvb2x0aXAgPSBpc0VuYWJsZVRvb2x0aXA7XHJcbiAgICAgICAgcmVkcmF3KCk7XHJcbiAgICAgICAgcmV0dXJuIGFwaTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBlbmFibGVab29tKGlzRW5hYmxlWm9vbSkge1xyXG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHNlbGYuaXNFbmFibGVab29tOyAgICAgICAgXHJcbiAgICAgICAgem9vbS5vbihcInpvb21cIiwgKGlzRW5hYmxlWm9vbSkgPyByZWRyYXcgOiBudWxsKTtcclxuICAgICAgICBzZWxmLmlzRW5hYmxlWm9vbSA9IGlzRW5hYmxlWm9vbTtcclxuICAgICAgICByZXR1cm4gYXBpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldExhbmVMZW5ndGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYubGFuZXMubGVuZ3RoOyAvLyhkMy5tYXgoc2VsZi5pdGVtcywgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5sYW5lIH0pICsgMSkgfHwgMDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRNYXJnaW5XaWR0aCgpIHtcclxuICAgICAgICByZXR1cm4gc2VsZi53aWR0aCAtIHNlbGYubWFyZ2luLnJpZ2h0IC0gc2VsZi5tYXJnaW4ubGVmdDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRNYXJnaW5IZWlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuaGVpZ2h0IC0gc2VsZi5tYXJnaW4udG9wIC0gc2VsZi5tYXJnaW4uYm90dG9tO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFRpbWVEb21haW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgc2VsZi5zdGFydFRpbWUgIHx8IGQzLm1pbihzZWxmLml0ZW1zLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnN0YXJ0IH0pLFxyXG4gICAgICAgICAgICBzZWxmLmVuZFRpbWUgICAgfHwgZDMubWF4KHNlbGYuaXRlbXMsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuZW5kIH0pXHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBoaWRlVG9vbHRpcCgpIHtcclxuICAgICAgICB0b29sdGlwRGl2LnRyYW5zaXRpb24oKVxyXG4gICAgICAgICAgICAuZHVyYXRpb24oNTAwKVxyXG4gICAgICAgICAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIDApXHJcbiAgICAgICAgICAgIC5zdHlsZShcImRpc3BsYXlcIiwgXCJub25lXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGl0ZW1zKG5ld0l0ZW1zKSB7XHJcbiAgICAgICAgdmFyIGl0ZW1zVHlwZSA9IHRvU3RyLmNhbGwobmV3SXRlbXMpO1xyXG5cclxuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzZWxmLml0ZW1zO1xyXG5cclxuICAgICAgICBpZiAoaXRlbXNUeXBlICE9PSBhc3RyKSB0aHJvd0Vycm9yKCdFeHBlY3RlZCBhcnJheS4gR290OiAnICsgaXRlbXNUeXBlKTtcclxuXHJcbiAgICAgICAgY2hlY2tSZXF1aXJlSXRlbUZpZWxkKG5ld0l0ZW1zKTtcclxuXHJcbiAgICAgICAgc2VsZi5pdGVtcyA9IG5ld0l0ZW1zO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG9uSXRlbXNDaGFuZ2UoKTtcclxuICAgICAgICByZXR1cm4gYXBpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGxhbmVzKG5ld0xhbmVzKSB7XHJcbiAgICAgICAgdmFyIGxhbmVzVHlwZSA9IHRvU3RyLmNhbGwobmV3TGFuZXMpO1xyXG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHNlbGYubGFuZXM7XHJcbiAgICAgICAgaWYgKGxhbmVzVHlwZSAhPT0gYXN0cikgdGhyb3dFcnJvcignRXhwZWN0ZWQgYXJyYXkuIEdvdDogJyArIGxhbmVzVHlwZSk7XHJcbiAgICAgICAgc2VsZi5sYW5lcyA9IG5ld0xhbmVzO1xyXG4gICAgICAgIHNlbGYubGFuZXMubGVuZ3RoID0gZ2V0TGFuZUxlbmd0aCgpIHx8IHNlbGYubGFuZXMubGVuZ3RoO1xyXG4gICAgICAgIHNob3dMYW5lTGFiZWwoIXNlbGYuaXNTaG93TGFuZUxhYmVsKTtcclxuICAgICAgICBzaG93TGFuZUxhYmVsKCFzZWxmLmlzU2hvd0xhbmVMYWJlbCk7XHJcbiAgICAgICAgcmV0dXJuIGFwaTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhZGRMYW5lcyhuZXdMYW5lKSB7XHJcbiAgICAgICAgdmFyIGxhbmVUeXBlID0gdG9TdHIuY2FsbChuZXdMYW5lKTtcclxuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzZWxmLmxhbmVzO1xyXG4gICAgICAgIGlmIChsYW5lVHlwZSAhPT0gc3N0cikgdGhyb3dFcnJvcignRXhwZWN0ZWQgU3RyaW5nLiBHb3Q6ICcgKyBsYW5lVHlwZSk7XHJcbiAgICAgICAgc2VsZi5sYW5lcy5wdXNoKG5ld0xhbmUpO1xyXG4gICAgICAgIG9uTGFuZXNDaGFuZ2UoKTtcclxuICAgICAgICByZXR1cm4gYXBpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG1hcmdpbihuZXdNYXJnaW4pIHtcclxuICAgICAgICB2YXIgbXNnID0gXCIgbWFyZ2luIHZhbHVlIGlzIGluY29ycmVjdC4gQWxsIHZhbHVlcyBzaG91bGQgYmUgbnVtYmVyc1wiO1xyXG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHNlbGYubWFyZ2luO1xyXG4gICAgICAgIGlmIChuZXdNYXJnaW4udG9wICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKGlzTmFOKG5ld01hcmdpbi50b3ApKSB0aHJvd0Vycm9yKFwiJ1RvcCdcIiArIG1zZyk7XHJcbiAgICAgICAgICAgIHNlbGYubWFyZ2luLnRvcCA9IHBhcnNlSW50KG5ld01hcmdpbi50b3ApO1xyXG4gICAgICAgICAgICBtYWluLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBzZWxmLm1hcmdpbi5sZWZ0ICsgXCIsXCIgKyBzZWxmLm1hcmdpbi50b3AgKyBcIilcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuZXdNYXJnaW4ucmlnaHQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAoaXNOYU4obmV3TWFyZ2luLnJpZ2h0KSkgdGhyb3dFcnJvcihcIidSaWdodCdcIiArIG1zZyk7XHJcbiAgICAgICAgICAgIHNlbGYubWFyZ2luLnJpZ2h0ID0gcGFyc2VJbnQobmV3TWFyZ2luLnJpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5ld01hcmdpbi5ib3R0b20gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAoaXNOYU4obmV3TWFyZ2luLmJvdHRvbSkpIHRocm93RXJyb3IoXCInQm90dG9tJ1wiICsgbXNnKTtcclxuICAgICAgICAgICAgc2VsZi5tYXJnaW4uYm90dG9tID0gcGFyc2VJbnQobmV3TWFyZ2luLmJvdHRvbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuZXdNYXJnaW4ubGVmdCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGlmIChpc05hTihuZXdNYXJnaW4ubGVmdCkpIHRocm93RXJyb3IoXCInTGVmdCdcIiArIG1zZyk7XHJcbiAgICAgICAgICAgIHNlbGYubWFyZ2luLmxlZnQgPSBwYXJzZUludChuZXdNYXJnaW4ubGVmdCk7XHJcbiAgICAgICAgICAgIG1haW4uYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIHNlbGYubWFyZ2luLmxlZnQgKyBcIixcIiArIHNlbGYubWFyZ2luLnRvcCArIFwiKVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlc2l6ZSgpO1xyXG4gICAgICAgIHJldHVybiBhcGk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb25MYW5lc0NoYW5nZSgpIHtcclxuICAgICAgICB2YXIgbGFuZUxlbmd0aCA9IGdldExhbmVMZW5ndGgoKTtcclxuICAgICAgICB4U2NhbGUuZG9tYWluKGdldFRpbWVEb21haW4oKSk7XHJcbiAgICAgICAgeUF4aXMudGlja3MobGFuZUxlbmd0aCk7XHJcbiAgICAgICAgeVNjYWxlLmRvbWFpbihbMCwgbGFuZUxlbmd0aF0pO1xyXG4gICAgICAgIHpvb20ueCh4U2NhbGUpO1xyXG4gICAgICAgIHNob3dMYW5lTGFiZWwoIXNlbGYuaXNTaG93TGFuZUxhYmVsKTtcclxuICAgICAgICBzaG93TGFuZUxhYmVsKCFzZWxmLmlzU2hvd0xhbmVMYWJlbCk7XHJcbiAgICAgICAgcmVuZGVyU3VibGFuZSgpO1xyXG4gICAgICAgIHJlZHJhdygpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9uSXRlbXNDaGFuZ2UoKSB7XHJcbiAgICAgICAgdmFyIGxhbmVMZW5ndGggPSBnZXRMYW5lTGVuZ3RoKCk7XHJcbiAgICAgICAgc2VsZi5sYW5lcy5sZW5ndGggPSBsYW5lTGVuZ3RoO1xyXG4gICAgICAgIHhTY2FsZS5kb21haW4oZ2V0VGltZURvbWFpbigpKTtcclxuICAgICAgICB5QXhpcy50aWNrcyhsYW5lTGVuZ3RoKTtcclxuICAgICAgICB5U2NhbGUuZG9tYWluKFswLCBsYW5lTGVuZ3RoXSk7XHJcbiAgICAgICAgem9vbS54KHhTY2FsZSk7XHJcbiAgICAgICAgcmVkcmF3KCk7XHJcbiAgICAgICAgcmVkcmF3KCk7XHJcbiAgICAgICAgcmVuZGVyU3VibGFuZSgpOyAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVkcmF3KCkge1xyXG4gICAgICAgIHZhciByZWN0cztcclxuXHJcbiAgICAgICAgcmVjdHMgPSBpdGVtUmVjdHMuc2VsZWN0QWxsKFwicmVjdFwiKVxyXG4gICAgICAgICAgICAuZGF0YShzZWxmLml0ZW1zKVxyXG4gICAgICAgICAgICAuYXR0cihcImlkXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuaWQgfSlcclxuICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiB4U2NhbGUoZC5zdGFydCk7IH0pXHJcbiAgICAgICAgICAgIC5hdHRyKFwieVwiLCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICAgICAgaWYoZC5sYW5lID4gKHNlbGYubGFuZXMubGVuZ3RoIC0gMSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBkLmxhbmUgPSBzZWxmLmxhbmVzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNlbGYuc3VibGFuZXMgPCAyKSA/IHlTY2FsZShkLmxhbmUpIDogeVNjYWxlKGQubGFuZSkgKyBkLnN1YmxhbmUqc2VsZi5pdGVtSGVpZ2h0O1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiB4U2NhbGUoZC5lbmQpIC0geFNjYWxlKGQuc3RhcnQpOyB9KVxyXG4gICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCBzZWxmLml0ZW1IZWlnaHQpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQuY2xhc3MgPT09ICB1bmRlZmluZWQgPyAnc3VjY2VzcycgOiBkLmNsYXNzOyB9KVxyXG4gICAgICAgICAgICAuY2FsbChkcmFnKVxyXG4gICAgICAgICAgICAub24oXCJkYmxjbGlja1wiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgc2VsZi5lbmREcmFnLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5kb3VibGVDbGlja1tpXSh0aGlzLCBkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oXCJtb3VzZW92ZXJcIiwgKHNlbGYuaXNFbmFibGVUb29sdGlwKSA/IHNob3dUb29sdGlwIDogbnVsbClcclxuICAgICAgICAgICAgLm9uKFwibW91c2VsZWF2ZVwiLCAoc2VsZi5pc0VuYWJsZVRvb2x0aXApID8gaGlkZVRvb2x0aXAgOiBudWxsKVxyXG4gICAgICAgICAgICAub24oXCJtb3VzZW1vdmVcIiwgY2hhbmdlQ3Vyc29yKTtcclxuXHJcbiAgICAgICAgcmVjdHMuZW50ZXIoKS5hcHBlbmQoXCJyZWN0XCIpO1xyXG4gICAgICAgIHJlY3RzLmV4aXQoKS5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgdmFyIHRleHRzID0gaXRlbVJlY3RzLnNlbGVjdEFsbChcInRleHRcIilcclxuICAgICAgICAgICAgLmRhdGEoc2VsZi5pdGVtcylcclxuICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24oZCl7XHJcbiAgICAgICAgICAgIHJldHVybiBkLmxhYmVsO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYXR0cihcImlkXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwidGV4dC1cIiArIGQuaWQgfSlcclxuICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHhTY2FsZShkLnN0YXJ0KSArICh4U2NhbGUoZC5lbmQpIC0geFNjYWxlKGQuc3RhcnQpKSAvIDI7IH0pXHJcbiAgICAgICAgICAgIC5hdHRyKFwieVwiLGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICBpZihkLmxhbmUgPiAoc2VsZi5sYW5lcy5sZW5ndGggLSAxKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGQubGFuZSA9IHNlbGYubGFuZXMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiAoc2VsZi5zdWJsYW5lcyA8IDIpID8geVNjYWxlKGQubGFuZSkgKyBzZWxmLml0ZW1IZWlnaHQvMiA6IHlTY2FsZShkLmxhbmUpICsgIGQuc3VibGFuZSpzZWxmLml0ZW1IZWlnaHQgKyBzZWxmLml0ZW1IZWlnaHQvMjtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmF0dHIoXCJmb250LXNpemVcIiwgMTEpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcclxuICAgICAgICAgICAgLmF0dHIoXCJ0ZXh0LWhlaWdodFwiLCAyMClcclxuICAgICAgICAgICAgLmF0dHIoXCJmaWxsXCIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLmZpbGxUaXRsZSA9PT0gdW5kZWZpbmVkID8gJyNmZmYnICsgJyBtYWluJyA6IGQuZmlsbFRpdGxlICsgJyBtYWluJzsgfSk7XHJcblxyXG4gICAgICAgIHRleHRzLmVudGVyKCkuYXBwZW5kKFwidGV4dFwiKTtcclxuICAgICAgICB0ZXh0cy5leGl0KCkucmVtb3ZlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbWFpbi5zZWxlY3QoJ2cubWFpbi5heGlzLmRhdGUnKS5jYWxsKHhBeGlzKTtcclxuICAgICAgICBtYWluLnNlbGVjdCgnZy5tYWluLmF4aXMubGFuZScpLmNhbGwoeUF4aXMpO1xyXG5cclxuICAgICAgICBoaWRlVG9vbHRpcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlc2l6ZSgpIHtcclxuICAgICAgICBpZiAoc2VsZi5pc0F1dG9SZXNpemUpIHtcclxuICAgICAgICAgICAgc2VsZi53aWR0aCA9IHBhcnNlSW50KGQzLnNlbGVjdChzZWxmLnJlbmRlclRvKS5zdHlsZSgnd2lkdGgnKSk7XHJcbiAgICAgICAgICAgIHNlbGYuaGVpZ2h0ID0gcGFyc2VJbnQoZDMuc2VsZWN0KHNlbGYucmVuZGVyVG8pLnN0eWxlKCdoZWlnaHQnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBtYXJnaW5XaWR0aCA9IGdldE1hcmdpbldpZHRoKCksXHJcbiAgICAgICAgICAgIG1hcmdpbkhlaWdodCA9IGdldE1hcmdpbkhlaWdodCgpO1xyXG5cclxuICAgICAgICB4U2NhbGUucmFuZ2UoWzAsIG1hcmdpbldpZHRoXSk7XHJcbiAgICAgICAgeVNjYWxlLnJhbmdlKFswLCBtYXJnaW5IZWlnaHRdKTtcclxuICAgICAgICBjaGFydC5hdHRyKFwid2lkdGhcIiwgc2VsZi53aWR0aCk7XHJcbiAgICAgICAgY2hhcnQuYXR0cihcImhlaWdodFwiLCBzZWxmLmhlaWdodCk7XHJcbiAgICAgICAgY2hhcnQuc2VsZWN0KCdkZWZzJykuc2VsZWN0KCdjbGlwUGF0aCcpLnNlbGVjdCgncmVjdCcpLmF0dHIoXCJ3aWR0aFwiLCBtYXJnaW5XaWR0aCk7XHJcbiAgICAgICAgY2hhcnQuc2VsZWN0KCdkZWZzJykuc2VsZWN0KCdjbGlwUGF0aCcpLnNlbGVjdCgncmVjdCcpLmF0dHIoXCJoZWlnaHRcIiwgbWFyZ2luV2lkdGgpO1xyXG4gICAgICAgIG1haW4uYXR0cihcIndpZHRoXCIsIG1hcmdpbldpZHRoKTtcclxuICAgICAgICBtYWluLmF0dHIoXCJoZWlnaHRcIiwgbWFyZ2luSGVpZ2h0KTtcclxuXHJcbiAgICAgICAgbWFpbi5zZWxlY3QoJ2cubWFpbi5heGlzLmRhdGUnKVxyXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCcgKyBnZXRNYXJnaW5IZWlnaHQoKSArICcpJyk7XHJcblxyXG4gICAgICAgIG1haW4uc2VsZWN0KCdnLmxhbmVMYWJlbHMnKVxyXG4gICAgICAgICAgICAuc2VsZWN0QWxsKFwiLmxhbmVUZXh0XCIpXHJcbiAgICAgICAgICAgIC5kYXRhKHNlbGYubGFuZXMpXHJcbiAgICAgICAgICAgIC5hdHRyKFwieVwiLCBmdW5jdGlvbihkLCBpKSB7cmV0dXJuIHlTY2FsZShpICsgLjUpO30pXHJcblxyXG4gICAgICAgIHpvb20ueCh4U2NhbGUpO1xyXG5cclxuICAgICAgICBzaG93WEdyaWQoc2VsZi5pc1Nob3dZR3JpZCk7XHJcbiAgICAgICAgc2hvd1lHcmlkKHNlbGYuaXNTaG93WUdyaWQpO1xyXG5cclxuICAgICAgICByZWRyYXcoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaG93TGFuZUxhYmVsKGlzU2hvd0xhbmVMYWJlbCkge1xyXG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHNlbGYuaXNTaG93TGFuZUxhYmVsO1xyXG4gICAgICAgIHNlbGYuaXNTaG93TGFuZUxhYmVsID0gaXNTaG93TGFuZUxhYmVsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChpc1Nob3dMYW5lTGFiZWwgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIG1haW4uc2VsZWN0QWxsKFwiLmxhbmVUZXh0XCIpLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHsgICBcclxuICAgICAgICAgICAgbWFpbi5zZWxlY3QoJ2cubGFuZUxhYmVscycpLnNlbGVjdEFsbChcIi5sYW5lVGV4dFwiKVxyXG4gICAgICAgICAgICAgICAgLmRhdGEoc2VsZi5sYW5lcylcclxuICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZChcInRleHRcIilcclxuICAgICAgICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHtyZXR1cm4gZDt9KVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2lkJyxmdW5jdGlvbihkLCBpbmRleCkge3JldHVybiAnbGFuZS0nICsgaW5kZXg7fSlcclxuICAgICAgICAgICAgICAgIC5hdHRyKFwieFwiLCAtc2VsZi5tYXJnaW4ubGVmdClcclxuICAgICAgICAgICAgICAgIC5hdHRyKFwieVwiLCBmdW5jdGlvbihkLCBpKSB7cmV0dXJuIHlTY2FsZShpICsgLjUpO30pXHJcbiAgICAgICAgICAgICAgICAuYXR0cihcImR5XCIsIFwiLjVleFwiKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBcInN0YXJ0XCIpXHJcbiAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibGFuZVRleHRcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYXBpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZUl0ZW1zKG5ld0l0ZW0pIHtcclxuICAgICAgICByZXF1aXJlSXRlbUZpZWxkKG5ld0l0ZW0sIFwidXBkYXRlXCIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBvbGRJdGVtID0gc2VsZi5pdGVtcy5maWx0ZXIoZnVuY3Rpb24ob2JqKXsgcmV0dXJuIG9iai5pZCA9PT0gbmV3SXRlbS5pZH0pWzBdO1xyXG5cclxuICAgICAgICBpZihvbGRJdGVtID09PSB1bmRlZmluZWQpIHRocm93RXJyb3IoXCJUaGlzIGl0ZW0gbm90IGZvdW5kXCIpXHJcblxyXG4gICAgICAgIGNvcHlTYW1lUHJvcChvbGRJdGVtLCBuZXdJdGVtKTtcclxuICAgICAgICBcclxuICAgICAgICBvbkl0ZW1zQ2hhbmdlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd1Rvb2x0aXAoZCkge1xyXG4gICAgICAgIGlmIChkMy5ldmVudC5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47XHJcbiAgICAgICAgdG9vbHRpcERpdi5zdHlsZShcImRpc3BsYXlcIiwgXCJibG9ja1wiKVxyXG4gICAgICAgICAgICAudHJhbnNpdGlvbigpXHJcbiAgICAgICAgICAgIC5kdXJhdGlvbigyMDApXHJcbiAgICAgICAgICAgIC5zdHlsZShcIm9wYWNpdHlcIiwgLjkpO1xyXG4gICAgICAgIHRvb2x0aXBEaXYuaHRtbCgodHlwZW9mIGQudG9vbHRpcCA9PT0gJ2Z1bmN0aW9uJykgPyBkLnRvb2x0aXAoKSA6IGQudG9vbHRpcClcclxuICAgICAgICAgICAgLnN0eWxlKFwibGVmdFwiLCAoZDMuZXZlbnQucGFnZVgpICsgXCJweFwiKVxyXG4gICAgICAgICAgICAuc3R5bGUoXCJ0b3BcIiwgKGQzLmV2ZW50LnBhZ2VZKSArIFwicHhcIik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd1hHcmlkKGlzU2hvd1hHcmlkKSB7XHJcbiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gc2VsZi5pc1Nob3dYR3JpZDtcclxuICAgICAgICB2YXIgaGVpZ2h0ID0gKGlzU2hvd1hHcmlkICE9PSBmYWxzZSkgPyAtZ2V0TWFyZ2luSGVpZ2h0KCkgOiAtNjtcclxuICAgICAgICB4QXhpcy50aWNrU2l6ZShoZWlnaHQsIDAsIDApO1xyXG4gICAgICAgIHNlbGYuaXNTaG93WEdyaWQgPSBpc1Nob3dYR3JpZDtcclxuICAgICAgICBtYWluLnNlbGVjdCgnZy5tYWluLmF4aXMuZGF0ZScpLmNhbGwoeEF4aXMpO1xyXG4gICAgICAgIHJldHVybiBhcGk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd1lHcmlkKGlzU2hvd1lHcmlkKSB7XHJcbiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gc2VsZi5pc1Nob3dZR3JpZDtcclxuICAgICAgICB2YXIgd2lkdGggPSAoaXNTaG93WUdyaWQgIT09IGZhbHNlKSA/IC1nZXRNYXJnaW5XaWR0aCgpIDogLTY7XHJcbiAgICAgICAgeUF4aXMudGlja1NpemUod2lkdGgsIDAsIDApO1xyXG4gICAgICAgIHNlbGYuaXNTaG93WUdyaWQgPSBpc1Nob3dZR3JpZDtcclxuICAgICAgICBtYWluLnNlbGVjdCgnZy5tYWluLmF4aXMubGFuZScpLmNhbGwoeUF4aXMpO1xyXG4gICAgICAgIHJldHVybiBhcGk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XHJcbiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gW3NlbGYud2lkdGgsIHNlbGYuaGVpZ2h0XTtcclxuICAgICAgICBzZWxmLndpZHRoID0gcGFyc2VJbnQod2lkdGgpIHx8IHNlbGYud2lkdGg7XHJcbiAgICAgICAgc2VsZi5oZWlnaHQgPSBwYXJzZUludChoZWlnaHQpIHx8IHNlbGYuaGVpZ2h0O1xyXG4gICAgICAgIGF1dG9yZXNpemUoZmFsc2UpO1xyXG4gICAgICAgIHJlc2l6ZSgpO1xyXG4gICAgICAgIHJldHVybiBhcGk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc3VibGFuZXMobmV3U3VibGFuZXMpIHtcclxuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzZWxmLnN1YmxhbmVzO1xyXG4gICAgICAgIHNlbGYuc3VibGFuZXMgPSBuZXdTdWJsYW5lcztcclxuICAgICAgICByZWRyYXcoKTtcclxuICAgICAgICByZXR1cm4gYXBpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldEl0ZW1zQnlMYW5lKGxhbmUpIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5pdGVtcy5maWx0ZXIoZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbS5sYW5lID09IGxhbmU7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRNYXhTdWJsYW5lKCkge1xyXG4gICAgICAgIHZhciBtYXhTdWJsYW5lID0ge1xyXG4gICAgICAgICAgICBtYXg6IDAsXHJcbiAgICAgICAgICAgIGxhbmVzOiBbXVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZDMubWF4KHNlbGYuaXRlbXMsIGZ1bmN0aW9uKGQpIHsgXHJcbiAgICAgICAgICAgIGlmKChkLnN1YmxhbmUgKyAxKSA+IG1heFN1YmxhbmUubWF4KSB7XHJcbiAgICAgICAgICAgICAgICBtYXhTdWJsYW5lLm1heCA9IGQuc3VibGFuZSArIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbWF4U3VibGFuZS5sYW5lcyA9IHNlbGYuaXRlbXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqLnN1YmxhbmUgPT0gKG1heFN1YmxhbmUubWF4IC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmxhbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgcmV0dXJuIG1heFN1YmxhbmU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIFByaXZhdGUgbWV0aG9kXHJcblxyXG4gICAgZnVuY3Rpb24gY2hlY2tSZXF1aXJlSXRlbUZpZWxkKGl0ZW1zKSB7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBpdGVtID0gaXRlbXNbaV07XHJcbiAgICAgICAgICAgIHJlcXVpcmVJdGVtRmllbGQoaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlcXVpcmVJdGVtRmllbGQoaXRlbSwgdHlwZSkge1xyXG4gICAgICAgIGlmKHR5cGUgIT09ICd1cGRhdGUnKSB7XHJcbiAgICAgICAgICAgIGlmKGl0ZW0uc3VibGFuZSA9PT0gdW5kZWZpbmVkKSB7IGl0ZW0uc3VibGFuZSA9IDA7IH1cclxuICAgICAgICAgICAgaWYoaXRlbS5jbGFzcyA9PT0gdW5kZWZpbmVkKSB7IGl0ZW0uY2xhc3MgPSAnc3VjY2Vzcyc7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzdGFydERhdGUgPSBuZXcgRGF0ZShpdGVtLnN0YXJ0KTtcclxuICAgICAgICB2YXIgZW5kRGF0ZSA9IG5ldyBEYXRlKGl0ZW0uZW5kKTtcclxuICAgICAgICB2YXIgaWRzID0gc2VsZi5pdGVtcy5maWx0ZXIoZnVuY3Rpb24ob2JqKXsgcmV0dXJuIG9iai5pZCA9PT0gaXRlbS5pZH0pO1xyXG5cclxuICAgICAgICBpZihpdGVtLmlkID09PSB1bmRlZmluZWQpICB0aHJvd0Vycm9yKCdJZCByZXF1aXJlZCcpXHJcbiAgICAgICAgaWYoaXRlbS5sYW5lID09PSB1bmRlZmluZWQpIHRocm93RXJyb3IoJ0xhbmUgcmVxdWlyZWQnKVxyXG4gICAgICAgIGlmKGlkcy5sZW5ndGggPiAxKSB0aHJvd0Vycm9yKCdJZDogJyArIGlkc1swXS5pZCArICcgZXhwZWN0ZWQgdW5pcXVlJylcclxuICAgICAgICBpZighKHN0YXJ0RGF0ZSBpbnN0YW5jZW9mIERhdGUgJiYgIWlzTmFOKHN0YXJ0RGF0ZSkpKSB0aHJvd0Vycm9yKCdTdGFydCBkYXRlIGV4cGVjdGVkIERhdGUnKVxyXG4gICAgICAgIGlmKCEoZW5kRGF0ZSBpbnN0YW5jZW9mIERhdGUgJiYgIWlzTmFOKGVuZERhdGUpKSkgdGhyb3dFcnJvcignRW5kIGRhdGUgZXhwZWN0ZWQgRGF0ZScpXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVuZGVyU3VibGFuZSgpIHtcclxuICAgICAgICBcclxuICAgICAgICBzZXBhcmF0ZVN1YmxhbmUoKTtcclxuXHJcbiAgICAgICAgdmFyIG1heCA9IGdldE1heFN1YmxhbmUoKTtcclxuICAgICAgICBcclxuICAgICAgICBzaXplKHNlbGYud2lkdGgsICBtYXgubWF4KnNlbGYuaXRlbUhlaWdodCpzZWxmLmxhbmVzLmxlbmd0aCArIHNlbGYubWFyZ2luLnRvcCArIHNlbGYubWFyZ2luLmJvdHRvbSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc3VibGFuZXMobWF4Lm1heCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHNlcGFyYXRlU3VibGFuZSgpIHtcclxuICAgICAgICBmb3IodmFyIGwgPSAwOyBsIDwgc2VsZi5sYW5lcy5sZW5ndGg7IGwrKykge1xyXG4gICAgICAgICAgICB2YXIgaXRlbUxhbmVzID0gc2VsZi5pdGVtcy5maWx0ZXIoZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmxhbmUgPT0gbDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgaXRlbUxhbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGl0ZW1MYW5lc1tpXTtcclxuICAgICAgICAgICAgICAgIHZhciBpdGVtQ2hhbmdlID0gc2VsZi5pdGVtcy5maW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKG9iail7IHJldHVybiBvYmouaWQgPT09IGl0ZW0uaWR9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgaXRlbUNoYW5nZS5zdWJsYW5lID0gaTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gICAgICAgIFxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuICAgIGZ1bmN0aW9uIHRocm93RXJyb3IobXNnKSB7XHJcbiAgICAgICAgdGhyb3cgVHlwZUVycm9yKG1zZyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFwaTtcclxufVxyXG4iXX0=
