"use strict";var ganttChart=function(t){function e(t){var e=K.call(t);return e!==Q&&e!==U&&N("Expected object or array. Got: "+e),e===Q?J.items=J.items.concat(t):J.items.push(t),E(),Y}function n(t){return arguments.length?(d3.select(window).on("resize",t!==!1?z:null),J.isAutoResize=t,Y):J.isAutoResize}function a(t,e){switch(t){case"startDrag":J.startDrag.push(e);break;case"moveDrag":J.moveDrag.push(e);break;case"endDrag":J.endDrag.push(e)}return Y}function r(){var t=J.lanes.length,e=f(),n=p();P=d3.select(J.renderTo).append("svg").attr("width",J.width).attr("height",J.height).attr("class","gantt-chart"),P.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",e).attr("height",n),X=d3.behavior.drag().on("dragstart",function(t){o(this,t);for(var e=0;e<J.startDrag.length;e++)J.startDrag[e](this,t)}).on("drag",function(t){s(this,t);for(var e=0;e<J.moveDrag.length;e++)J.moveDrag[e](this,t)}).on("dragend",function(t){l(this,t);for(var e=0;e<J.endDrag.length;e++)J.endDrag[e](this,t)}),j=P.append("g").attr("transform","translate("+J.margin.left+","+J.margin.top+")").attr("width",e).attr("height",n).attr("class","main"),Z=j.append("g").attr("clip-path","url(#clip)"),M=d3.select("body").append("div").attr("class","gantt-tooltip").style("opacity",0),B=d3.time.scale().domain(v()).range([0,e]),_=d3.scale.linear().domain([0,t]).range([0,n]),O=d3.svg.axis().scale(B).orient("bottom").ticks(J.duration),C=d3.svg.axis().scale(_).orient("left").ticks(t).tickFormat(""),q=d3.behavior.zoom().x(B),j.append("g").attr("transform","translate(0,"+n+")").attr("class","main axis date").call(O),j.append("g").attr("class","main axis lane").call(C),j.append("g").attr("class","laneLabels"),P.call(q),d3.select("html").on("click",function(t){J.isEnableTooltip&&(event.target.closest("svg rect")||x())})}function i(t){var e=parseFloat(d3.select(this).attr("x")),n=parseFloat(d3.select(this).attr("width")),a=e+n;e+J.margin.left+V>=d3.event.x||a+J.margin.left-5<=d3.event.x?d3.select(this).attr("class",void 0===t["class"]?"success"+(J.isEnableItemResize?" cursor-resize":" cursor-default"):t["class"]+(J.isEnableItemResize?" cursor-resize":" cursor-default")):d3.select(this).attr("class",void 0===t["class"]?"success"+(J.isEnableDrag?" cursor-move":" cursor-default"):t["class"]+(J.isEnableDrag?" cursor-move":" cursor-default"))}function s(t,e){var n=parseFloat(d3.select(t).attr("x")),a=parseFloat(d3.select(t).attr("y")),r=parseFloat(d3.select(t).attr("width")),i=n+r,s=d3.select(t).attr("id"),l=parseFloat(d3.select("#text-"+s).attr("x"));if(J.isEnableItemResize&&e.isResize){if(n+V>=d3.event.x&&n<=i-V)return e.start=Date.parse(B.invert(n+d3.event.dx)),I(e),d3.select(t).attr("x",n+d3.event.dx).attr("width",r-d3.event.dx),void d3.select("#text-"+s).attr("x",n+(r+d3.event.dx)/2).attr("width",(r+d3.event.dx)/2);if(i-V<=d3.event.x&&n+5<=i)return e.end=Date.parse(B.invert(parseFloat(r+d3.event.dx)+parseFloat(n))),I(e),d3.select(t).attr("width",r+d3.event.dx),void d3.select("#text-"+s).attr("x",n+(r+d3.event.dx)/2).attr("width",(r+d3.event.dx)/2)}J.isEnableDrag&&e.isMove&&(e.start=Date.parse(B.invert(n+d3.event.dx)),e.end=Date.parse(B.invert(parseFloat(r+d3.event.dx)+parseFloat(n))),I(e),d3.select(t).attr("x",n+d3.event.dx).attr("y",a+d3.event.dy),d3.select("#text-"+s).attr("x",l+d3.event.dx).attr("y",a+J.itemHeight/2+d3.event.dy))}function l(t,e){if(J.isEnableDrag||J.isEnableItemResize){var n=d3.select(t),a=Math.floor(_.invert(n.attr("y"))),r=n.attr("x"),i=n.attr("id");a>=J.lanes.length&&(a=J.lanes.length-1),a<0&&(a=0),delete e.isResize,delete e.isMove,n.attr("y",_(a)),d3.select("#text-"+i).attr("y",_(a)+J.itemHeight/2),e.lane=a,e.start=Date.parse(B.invert(parseFloat(r))),e.end=Date.parse(B.invert(parseFloat(n.attr("width"))+parseFloat(r))),x(),S(),D()}}function o(t,e){if(J.isEnableDrag||J.isEnableItemResize){var n=d3.select(t).attr("class");n.includes("cursor-resize")?e.isResize=!0:n.includes("cursor-move")&&(e.isMove=!0),e.oldStart=e.start,e.oldEnd=e.end,d3.event.sourceEvent.stopPropagation()}}function d(t,e){var n;for(n in e)t.hasOwnProperty(n)&&(K.call(e[n])===U?d(t[n],e[n]):t[n]=e[n])}function c(t){return arguments.length?(J.isEnableDrag=t,D(),Y):J.isEnableDrag}function u(t){return arguments.length?(J.isEnableItemResize=t,D(),Y):J.isEnableItemResize}function h(t){return arguments.length?(J.isEnableTooltip=t,D(),Y):J.isEnableTooltip}function g(t){return arguments.length?(q.on("zoom",t?D:null),J.isEnableZoom=t,Y):J.isEnableZoom}function m(){return d3.max(J.items,function(t){return t.lane})+1||0}function f(){return J.width-J.margin.right-J.margin.left}function p(){return J.height-J.margin.top-J.margin.bottom}function v(){return[J.startTime||d3.min(J.items,function(t){return t.start}),J.endTime||d3.max(J.items,function(t){return t.end})]}function x(){M.transition().duration(500).style("opacity",0).style("display","none")}function b(t){var e=K.call(t);return arguments.length?(e!==Q&&N("Expected array. Got: "+e),J.items=t,E(),Y):J.items}function w(t){var e=K.call(t);return arguments.length?(e!==Q&&N("Expected array. Got: "+e),J.lanes=t,J.lanes.length=m()||J.lanes.length,T(!J.isShowLaneLabel),Y):J.lanes}function y(t){var e=" margin value is incorrect. All values should be numbers";return arguments.length?(void 0!==t.top&&(isNaN(t.top)&&N("'Top'"+e),J.margin.top=parseInt(t.top),j.attr("transform","translate("+J.margin.left+","+J.margin.top+")")),void 0!==t.right&&(isNaN(t.right)&&N("'Right'"+e),J.margin.right=parseInt(t.right)),void 0!==t.bottom&&(isNaN(t.bottom)&&N("'Bottom'"+e),J.margin.bottom=parseInt(t.bottom)),void 0!==t.left&&(isNaN(t.left)&&N("'Left'"+e),J.margin.left=parseInt(t.left),j.attr("transform","translate("+J.margin.left+","+J.margin.top+")")),z(),Y):J.margin}function E(){var t=m();J.lanes.length=t,B.domain(v()),C.ticks(t),_.domain([0,t]),q.x(B),D(),D()}function D(){var t;t=Z.selectAll("rect").data(J.items).attr("id",function(t){return t.id}).attr("x",function(t){return B(t.start)}).attr("y",function(t){return J.sublanes<2?_(t.lane):_(t.lane)+t.sublane*J.itemHeight}).attr("width",function(t){return B(t.end)-B(t.start)}).attr("height",J.itemHeight).attr("class",function(t){return void 0===t["class"]?"success":t["class"]}).call(X).on("mouseover",J.isEnableTooltip?I:null).on("mouseleave",J.isEnableTooltip?x:null).on("mousemove",i),t.enter().append("rect"),t.exit().remove();var e=Z.selectAll("text").data(J.items).text(function(t){return t.label}).attr("id",function(t){return"text-"+t.id}).attr("x",function(t){return B(t.start)+(B(t.end)-B(t.start))/2}).attr("y",function(t){return J.sublanes<2?_(t.lane)+J.itemHeight/2:_(t.lane)+t.sublane*J.itemHeight+J.itemHeight/2}).attr("font-size",11).attr("text-anchor","middle").attr("text-height",20).attr("fill",function(t){return void 0===t.fillTitle?"#fff main":t.fillTitle+" main"});e.enter().append("text"),e.exit().remove(),j.select("g.main.axis.date").call(O),j.select("g.main.axis.lane").call(C),x()}function z(){J.isAutoResize&&(J.width=parseInt(d3.select(J.renderTo).style("width")),J.height=parseInt(d3.select(J.renderTo).style("height")));var t=f(),e=p();B.range([0,t]),_.range([0,e]),P.attr("width",J.width),P.attr("height",J.height),P.select("defs").select("clipPath").select("rect").attr("width",t),P.select("defs").select("clipPath").select("rect").attr("height",t),j.attr("width",t),j.attr("height",e),j.select("g.main.axis.date").attr("transform","translate(0,"+p()+")"),j.select("g.laneLabels").selectAll(".laneText").data(J.lanes).attr("y",function(t,e){return _(e+.5)}),q.x(B),R(J.isShowYGrid),G(J.isShowYGrid),D()}function T(t){return arguments.length?(J.isShowLaneLabel=t,t===!1?j.selectAll(".laneText").remove():j.select("g.laneLabels").selectAll(".laneText").data(J.lanes).enter().append("text").text(function(t){return t}).attr("id",function(t,e){return"lane-"+e}).attr("x",-J.margin.left).attr("y",function(t,e){return _(e+.5)}).attr("dy",".5ex").attr("text-anchor","start").attr("class","laneText"),Y):J.isShowLaneLabel}function I(t){d3.event.defaultPrevented||(M.style("display","block").transition().duration(200).style("opacity",.9),M.html("function"==typeof t.tooltip?t.tooltip():t.tooltip).style("left",d3.event.pageX+"px").style("top",d3.event.pageY+"px"))}function S(){k();var t=H();L(J.width,t.max*J.itemHeight*J.lanes.length+J.margin.top+J.margin.bottom),J.sublanes=t.max}function R(t){if(!arguments.length)return J.isShowXGrid;var e=t!==!1?-p():-6;return O.tickSize(e,0,0),J.isShowXGrid=t,j.select("g.main.axis.date").call(O),Y}function G(t){if(!arguments.length)return J.isShowYGrid;var e=t!==!1?-f():-6;return C.tickSize(e,0,0),J.isShowYGrid=t,j.select("g.main.axis.lane").call(C),Y}function L(t,e){return arguments.length?(J.width=parseInt(t)||J.width,J.height=parseInt(e)||J.height,n(!1),z(),Y):[J.width,J.height]}function A(t){return arguments.length?(J.sublanes=t,D(),Y):J.sublanes}function F(t){return J.items.filter(function(e){return e.lane==t})}function k(){for(var t=0;t<J.lanes.length;t++)for(var e=J.items.filter(function(e){return e.lane==t}),n=0;n<e.length;n++){var a=e[n],r=J.items.find(function(t){return t.id===a.id});r.sublane=n}}function H(){var t={max:0,lanes:[]};return d3.max(J.items,function(e){e.sublane+1>t.max&&(t.max=e.sublane+1)}),t.lanes=J.items.filter(function(e){return e.sublane==t.max-1}).map(function(t){return t.lane}),t}function N(t){throw TypeError(t)}var Y,P,X,j,Z,M,O,B,C,_,q,J={},K=Object.prototype.toString,Q="[object Array]",U="[object Object]",V=15;return Y={addItems:e,autoresize:n,enableDrag:c,enableItemResize:u,enabvarooltip:h,enableZoom:g,attachEvent:a,chart:function(){return j},items:b,lanes:w,margin:y,showLaneLabel:T,showXGrid:R,showYGrid:G,size:L,sublanes:A,getItemsByLane:F,svg:function(){return P},redraw:D,renderTo:function(){return J.renderTo},resize:z,xAxis:function(){return O},xScale:function(){return B},yScale:function(){return _},yAxis:function(){return C},zoom:function(){return q}},J.items=null,J.lanes=null,J.renderTo="#gantt_chart",J.sublanes=1,J.startTime=null,J.endTime=null,J.isAutoResize=!0,J.isEnableDrag=!0,J.isEnableItemResize=!0,J.isEnableTooltip=!0,J.isEnableZoom=!0,J.isShowXGrid=!0,J.isShowYGrid=!0,J.isShowLaneLabel=!0,J.duration=20,J.startDrag=[],J.moveDrag=[],J.endDrag=[],J.height=null,J.width=null,J.itemHeight=35,J.margin={top:20,right:15,bottom:20,left:20},function(){d(J,t),J.items=J.items||[],J.lanes=J.lanes||[],J.lanes.length=m(),null===J.height&&(J.height=parseInt(d3.select(J.renderTo).style("height"))||480),null===J.width&&(J.width=parseInt(d3.select(J.renderTo).style("width"))||640),r(),n(J.isAutoResize),c(J.isEnableDrag),h(J.isEnableTooltip),g(J.isEnableZoom),T(J.isEnableTooltip),R(J.isShowXGrid),G(J.isShowYGrid),S(),D()}(),Y};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbnR0LWNoYXJ0LmpzIl0sIm5hbWVzIjpbImdhbnR0Q2hhcnQiLCJjb25mIiwiYWRkSXRlbXMiLCJuZXdJdGVtcyIsIml0ZW1zVHlwZSIsInRvU3RyIiwiY2FsbCIsImFzdHIiLCJvc3RyIiwidGhyb3dFcnJvciIsInNlbGYiLCJpdGVtcyIsImNvbmNhdCIsInB1c2giLCJvbkl0ZW1zQ2hhbmdlIiwiYXBpIiwiYXV0b3Jlc2l6ZSIsImlzQXV0b1Jlc2l6ZSIsImFyZ3VtZW50cyIsImxlbmd0aCIsImQzIiwic2VsZWN0Iiwid2luZG93Iiwib24iLCJyZXNpemUiLCJhdHRhY2hFdmVudCIsImV2ZW50IiwiY2FsbGJhY2siLCJzdGFydERyYWciLCJtb3ZlRHJhZyIsImVuZERyYWciLCJidWlsZCIsImxhbmVMZW5ndGgiLCJsYW5lcyIsIm1hcmdpbldpZHRoIiwiZ2V0TWFyZ2luV2lkdGgiLCJtYXJnaW5IZWlnaHQiLCJnZXRNYXJnaW5IZWlnaHQiLCJjaGFydCIsInJlbmRlclRvIiwiYXBwZW5kIiwiYXR0ciIsIndpZHRoIiwiaGVpZ2h0IiwiZHJhZyIsImJlaGF2aW9yIiwiZCIsImRyYWdzdGFydCIsInRoaXMiLCJpIiwiZHJhZ21vdmUiLCJkcmFnZW5kIiwibWFpbiIsIm1hcmdpbiIsImxlZnQiLCJ0b3AiLCJpdGVtUmVjdHMiLCJ0b29sdGlwRGl2Iiwic3R5bGUiLCJ4U2NhbGUiLCJ0aW1lIiwic2NhbGUiLCJkb21haW4iLCJnZXRUaW1lRG9tYWluIiwicmFuZ2UiLCJ5U2NhbGUiLCJsaW5lYXIiLCJ4QXhpcyIsInN2ZyIsImF4aXMiLCJvcmllbnQiLCJ0aWNrcyIsImR1cmF0aW9uIiwieUF4aXMiLCJ0aWNrRm9ybWF0Iiwiem9vbSIsIngiLCJpc0VuYWJsZVRvb2x0aXAiLCJ0YXJnZXQiLCJjbG9zZXN0IiwiaGlkZVRvb2x0aXAiLCJjaGFuZ2VDdXJzb3IiLCJwYXJzZUZsb2F0IiwieDEiLCJyZXNpemVSZWN0TWFyZ2luIiwidW5kZWZpbmVkIiwidGhpc0VsIiwieSIsImlkIiwieFRleHQiLCJpc0VuYWJsZUl0ZW1SZXNpemUiLCJpc1Jlc2l6ZSIsInN0YXJ0IiwiRGF0ZSIsInBhcnNlIiwiaW52ZXJ0IiwiZHgiLCJzaG93VG9vbHRpcCIsImVuZCIsImlzRW5hYmxlRHJhZyIsImlzTW92ZSIsImR5IiwiaXRlbUhlaWdodCIsImVsIiwibGFuZSIsIk1hdGgiLCJmbG9vciIsInJlbmRlclN1YmxhbmUiLCJyZWRyYXciLCJjdXJzb3IiLCJpbmNsdWRlcyIsIm9sZFN0YXJ0Iiwib2xkRW5kIiwic291cmNlRXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJjb3B5U2FtZVByb3AiLCJjb3B5VG8iLCJjb3B5RnJvbSIsInAiLCJoYXNPd25Qcm9wZXJ0eSIsImVuYWJsZURyYWciLCJlbmFibGVJdGVtUmVzaXplIiwiZW5hYmxlVG9vbHRpcCIsImVuYWJsZVpvb20iLCJpc0VuYWJsZVpvb20iLCJnZXRMYW5lTGVuZ3RoIiwibWF4IiwicmlnaHQiLCJib3R0b20iLCJzdGFydFRpbWUiLCJtaW4iLCJlbmRUaW1lIiwidHJhbnNpdGlvbiIsIm5ld0xhbmVzIiwibGFuZXNUeXBlIiwic2hvd0xhbmVMYWJlbCIsImlzU2hvd0xhbmVMYWJlbCIsIm5ld01hcmdpbiIsIm1zZyIsImlzTmFOIiwicGFyc2VJbnQiLCJyZWN0cyIsInNlbGVjdEFsbCIsImRhdGEiLCJzdWJsYW5lcyIsInN1YmxhbmUiLCJlbnRlciIsImV4aXQiLCJyZW1vdmUiLCJ0ZXh0cyIsInRleHQiLCJsYWJlbCIsImZpbGxUaXRsZSIsInNob3dYR3JpZCIsImlzU2hvd1lHcmlkIiwic2hvd1lHcmlkIiwiaW5kZXgiLCJkZWZhdWx0UHJldmVudGVkIiwiaHRtbCIsInRvb2x0aXAiLCJzZXBhcmF0ZVN1YmxhbmUiLCJnZXRNYXhTdWJMYW5lIiwic2l6ZSIsImlzU2hvd1hHcmlkIiwidGlja1NpemUiLCJuZXdTdWJsYW5lcyIsImdldEl0ZW1zQnlMYW5lIiwiZmlsdGVyIiwiaXRlbSIsImwiLCJpdGVtTGFuZXMiLCJvYmoiLCJpdGVtQ2hhbmdlIiwiZmluZCIsIm1heFN1YmxhbmUiLCJtYXAiLCJUeXBlRXJyb3IiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImVuYWJ2YXJvb2x0aXAiXSwibWFwcGluZ3MiOiJBQUFBLFlBRUEsSUFBSUEsWUFBYSxTQUFTQyxHQTZGdEIsUUFBU0MsR0FBU0MsR0FDZCxHQUFJQyxHQUFZQyxFQUFNQyxLQUFLSCxFQUkzQixPQUhJQyxLQUFjRyxHQUFRSCxJQUFjSSxHQUFNQyxFQUFXLGtDQUFvQ0wsR0FDNUZBLElBQWNHLEVBQVFHLEVBQUtDLE1BQVFELEVBQUtDLE1BQU1DLE9BQU9ULEdBQVlPLEVBQUtDLE1BQU1FLEtBQUtWLEdBQ2xGVyxJQUNPQyxFQUdYLFFBQVNDLEdBQVdDLEdBQ2hCLE1BQUtDLFdBQVVDLFFBQ2ZDLEdBQUdDLE9BQU9DLFFBQVFDLEdBQUcsU0FBV04sS0FBaUIsRUFBU08sRUFBUyxNQUNuRWQsRUFBS08sYUFBZUEsRUFDYkYsR0FIdUJMLEVBQUtPLGFBTXZDLFFBQVNRLEdBQVlDLEVBQU9DLEdBQ3hCLE9BQU9ELEdBQ0gsSUFBSyxZQUNEaEIsRUFBS2tCLFVBQVVmLEtBQUtjLEVBQ3BCLE1BQ0osS0FBSyxXQUNEakIsRUFBS21CLFNBQVNoQixLQUFLYyxFQUNuQixNQUNKLEtBQUssVUFDRGpCLEVBQUtvQixRQUFRakIsS0FBS2MsR0FHMUIsTUFBT1osR0FHWCxRQUFTZ0IsS0FDTCxHQUFJQyxHQUFhdEIsRUFBS3VCLE1BQU1kLE9BQ3hCZSxFQUFjQyxJQUNkQyxFQUFlQyxHQUNuQkMsR0FBUWxCLEdBQUdDLE9BQU9YLEVBQUs2QixVQUNsQkMsT0FBTyxPQUNQQyxLQUFLLFFBQVMvQixFQUFLZ0MsT0FDbkJELEtBQUssU0FBVS9CLEVBQUtpQyxRQUNwQkYsS0FBSyxRQUFTLGVBRW5CSCxFQUFNRSxPQUFPLFFBQVFBLE9BQU8sWUFDdkJDLEtBQUssS0FBTSxRQUNYRCxPQUFPLFFBQ1BDLEtBQUssUUFBU1AsR0FDZE8sS0FBSyxTQUFVTCxHQUVw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QVdqSCxFQUFLa0gsY0FDaEJXLEVBQWM3SCxFQUFLbUUsaUJBQ25CNEUsRUFBVS9JLEVBQUt5SixhQUNmUixFQUFVakosRUFBS2dKLGFBQ2YvQyxJQUNBQyxPQTZqQkc3RiIsImZpbGUiOiJnYW50dC1jaGFydC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgZ2FudHRDaGFydCA9IGZ1bmN0aW9uKGNvbmYpIHtcclxuICAgIHZhciBhcGksXHJcbiAgICAgICAgc2VsZiA9IHt9LFxyXG4gICAgICAgIHRvU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxcclxuICAgICAgICBhc3RyID0gXCJbb2JqZWN0IEFycmF5XVwiLFxyXG4gICAgICAgIG9zdHIgPSBcIltvYmplY3QgT2JqZWN0XVwiLFxyXG4gICAgICAgIGNoYXJ0LCBkcmFnLCBtYWluLCBpdGVtUmVjdHMsIHRvb2x0aXBEaXYsIHhBeGlzLCB4U2NhbGUsIHlBeGlzLCB5U2NhbGUsIHpvb20sXHJcbiAgICAgICAgcmVzaXplUmVjdE1hcmdpbiA9IDE1O1xyXG5cclxuICAgIGFwaSA9IHtcclxuICAgICAgICBhZGRJdGVtczogYWRkSXRlbXMsXHJcbiAgICAgICAgYXV0b3Jlc2l6ZTogYXV0b3Jlc2l6ZSxcclxuICAgICAgICBlbmFibGVEcmFnOiBlbmFibGVEcmFnLFxyXG4gICAgICAgIGVuYWJsZUl0ZW1SZXNpemU6IGVuYWJsZUl0ZW1SZXNpemUsXHJcbiAgICAgICAgZW5hYnZhcm9vbHRpcDogZW5hYmxlVG9vbHRpcCxcclxuICAgICAgICBlbmFibGVab29tOiBlbmFibGVab29tLFxyXG4gICAgICAgIGF0dGFjaEV2ZW50OiBhdHRhY2hFdmVudCxcclxuICAgICAgICBjaGFydDogZnVuY3Rpb24oKSB7IHJldHVybiBtYWluIH0sXHJcbiAgICAgICAgLy8gZHJhZzogZnVuY3Rpb24oKSB7IHJldHVybiBkcmFnIH0sXHJcbiAgICAgICAgaXRlbXM6IGl0ZW1zLFxyXG4gICAgICAgIGxhbmVzOiBsYW5lcyxcclxuICAgICAgICBtYXJnaW46IG1hcmdpbixcclxuICAgICAgICBzaG93TGFuZUxhYmVsOiBzaG93TGFuZUxhYmVsLFxyXG4gICAgICAgIHNob3dYR3JpZDogc2hvd1hHcmlkLFxyXG4gICAgICAgIHNob3dZR3JpZDogc2hvd1lHcmlkLFxyXG4gICAgICAgIHNpemU6IHNpemUsXHJcbiAgICAgICAgc3VibGFuZXM6IHN1YmxhbmVzLFxyXG4gICAgICAgIGdldEl0ZW1zQnlMYW5lOiBnZXRJdGVtc0J5TGFuZSxcclxuICAgICAgICBzdmc6IGZ1bmN0aW9uKCkgeyByZXR1cm4gY2hhcnQgfSxcclxuICAgICAgICByZWRyYXc6IHJlZHJhdyxcclxuICAgICAgICByZW5kZXJUbzogZnVuY3Rpb24oKSB7IHJldHVybiBzZWxmLnJlbmRlclRvIH0sXHJcbiAgICAgICAgcmVzaXplOiByZXNpemUsXHJcbiAgICAgICAgeEF4aXM6IGZ1bmN0aW9uKCkgeyByZXR1cm4geEF4aXMgfSxcclxuICAgICAgICB4U2NhbGU6IGZ1bmN0aW9uKCkgeyByZXR1cm4geFNjYWxlIH0sXHJcbiAgICAgICAgeVNjYWxlOiBmdW5jdGlvbigpIHsgcmV0dXJuIHlTY2FsZSB9LFxyXG4gICAgICAgIHlBeGlzOiBmdW5jdGlvbigpIHsgcmV0dXJuIHlBeGlzIH0sXHJcbiAgICAgICAgem9vbTogZnVuY3Rpb24oKSB7IHJldHVybiB6b29tIH0sXHJcbiAgICB9O1xyXG5cclxuICAgIHNlbGYuaXRlbXMgPSBudWxsO1xyXG4gICAgc2VsZi5sYW5lcyA9IG51bGw7XHJcbiAgICBzZWxmLnJlbmRlclRvID0gJyNnYW50dF9jaGFydCc7XHJcbiAgICBzZWxmLnN1YmxhbmVzID0gMTtcclxuXHJcbiAgICBzZWxmLnN0YXJ0VGltZSA9IG51bGw7XHJcbiAgICBzZWxmLmVuZFRpbWUgPSBudWxsO1xyXG5cclxuICAgIHNlbGYuaXNBdXRvUmVzaXplID0gdHJ1ZTtcclxuICAgIHNlbGYuaXNFbmFibGVEcmFnID0gdHJ1ZTtcclxuICAgIHNlbGYuaXNFbmFibGVJdGVtUmVzaXplID0gdHJ1ZTtcclxuICAgIHNlbGYuaXNFbmFibGVUb29sdGlwID0gdHJ1ZTtcclxuICAgIHNlbGYuaXNFbmFibGVab29tID0gdHJ1ZTtcclxuICAgIHNlbGYuaXNTaG93WEdyaWQgPSB0cnVlO1xyXG4gICAgc2VsZi5pc1Nob3dZR3JpZCA9IHRydWU7XHJcbiAgICBzZWxmLmlzU2hvd0xhbmVMYWJlbCA9IHRydWU7XHJcbiAgICBzZWxmLmR1cmF0aW9uID0gMjA7XHJcblxyXG4gICAgc2VsZi5zdGFydERyYWcgPSBbXTtcclxuICAgIHNlbGYubW92ZURyYWcgPSBbXTtcclxuICAgIHNlbGYuZW5kRHJhZyA9IFtdO1xyXG5cclxuICAgIHNlbGYuaGVpZ2h0ID0gbnVsbDtcclxuICAgIHNlbGYud2lkdGggPSBudWxsO1xyXG4gICAgc2VsZi5pdGVtSGVpZ2h0ID0gMzU7XHJcbiAgICBzZWxmLm1hcmdpbiA9IHtcclxuICAgICAgICB0b3A6IDIwLFxyXG4gICAgICAgIHJpZ2h0OiAxNSxcclxuICAgICAgICBib3R0b206IDIwLFxyXG4gICAgICAgIGxlZnQ6IDIwXHJcbiAgICB9O1xyXG5cclxuICAgIChmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgICAgIGNvcHlTYW1lUHJvcChzZWxmLCBjb25mKTtcclxuXHJcbiAgICAgICAgc2VsZi5pdGVtcyA9IHNlbGYuaXRlbXMgfHwgW107XHJcbiAgICAgICAgc2VsZi5sYW5lcyA9IHNlbGYubGFuZXMgfHwgW107XHJcbiAgICAgICAgc2VsZi5sYW5lcy5sZW5ndGggPSBnZXRMYW5lTGVuZ3RoKCk7XHJcblxyXG4gICAgICAgIGlmIChzZWxmLmhlaWdodCA9PT0gbnVsbCkgc2VsZi5oZWlnaHQgPSBwYXJzZUludChkMy5zZWxlY3Qoc2VsZi5yZW5kZXJUbykuc3R5bGUoJ2hlaWdodCcpKSB8fCA0ODA7XHJcbiAgICAgICAgaWYgKHNlbGYud2lkdGggPT09IG51bGwpIHNlbGYud2lkdGggPSBwYXJzZUludChkMy5zZWxlY3Qoc2VsZi5yZW5kZXJUbykuc3R5bGUoJ3dpZHRoJykpIHx8IDY0MDtcclxuXHJcbiAgICAgICAgYnVpbGQoKTtcclxuICAgICAgICBhdXRvcmVzaXplKHNlbGYuaXNBdXRvUmVzaXplKTtcclxuICAgICAgICBlbmFibGVEcmFnKHNlbGYuaXNFbmFibGVEcmFnKTtcclxuICAgICAgICBlbmFibGVUb29sdGlwKHNlbGYuaXNFbmFibGVUb29sdGlwKTtcclxuICAgICAgICBlbmFibGVab29tKHNlbGYuaXNFbmFibGVab29tKTtcclxuICAgICAgICBzaG93TGFuZUxhYmVsKHNlbGYuaXNFbmFibGVUb29sdGlwKTtcclxuICAgICAgICBzaG93WEdyaWQoc2VsZi5pc1Nob3dYR3JpZCk7XHJcbiAgICAgICAgc2hvd1lHcmlkKHNlbGYuaXNTaG93WUdyaWQpO1xyXG4gICAgICAgIHJlbmRlclN1YmxhbmUoKTsgICAgICAgIFxyXG4gICAgICAgIHJlZHJhdygpO1xyXG4gICAgfSkoKTtcclxuXHJcbiAgICBmdW5jdGlvbiBhZGRJdGVtcyhuZXdJdGVtcykge1xyXG4gICAgICAgIHZhciBpdGVtc1R5cGUgPSB0b1N0ci5jYWxsKG5ld0l0ZW1zKTtcclxuICAgICAgICBpZiAoaXRlbXNUeXBlICE9PSBhc3RyICYmIGl0ZW1zVHlwZSAhPT0gb3N0cikgdGhyb3dFcnJvcignRXhwZWN0ZWQgb2JqZWN0IG9yIGFycmF5LiBHb3Q6ICcgKyBpdGVtc1R5cGUpO1xyXG4gICAgICAgIChpdGVtc1R5cGUgPT09IGFzdHIpID8gc2VsZi5pdGVtcyA9IHNlbGYuaXRlbXMuY29uY2F0KG5ld0l0ZW1zKSA6IHNlbGYuaXRlbXMucHVzaChuZXdJdGVtcyk7XHJcbiAgICAgICAgb25JdGVtc0NoYW5nZSgpO1xyXG4gICAgICAgIHJldHVybiBhcGk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYXV0b3Jlc2l6ZShpc0F1dG9SZXNpemUpIHtcclxuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzZWxmLmlzQXV0b1Jlc2l6ZTtcclxuICAgICAgICBkMy5zZWxlY3Qod2luZG93KS5vbigncmVzaXplJywgKGlzQXV0b1Jlc2l6ZSAhPT0gZmFsc2UpID8gcmVzaXplIDogbnVsbCk7XHJcbiAgICAgICAgc2VsZi5pc0F1dG9SZXNpemUgPSBpc0F1dG9SZXNpemU7XHJcbiAgICAgICAgcmV0dXJuIGFwaTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhdHRhY2hFdmVudChldmVudCwgY2FsbGJhY2spIHtcclxuICAgICAgICBzd2l0Y2goZXZlbnQpIHtcclxuICAgICAgICAgICAgY2FzZSBcInN0YXJ0RHJhZ1wiOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5zdGFydERyYWcucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIm1vdmVEcmFnXCI6XHJcbiAgICAgICAgICAgICAgICBzZWxmLm1vdmVEcmFnLnB1c2goY2FsbGJhY2spOyAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJlbmREcmFnXCI6XHJcbiAgICAgICAgICAgICAgICBzZWxmLmVuZERyYWcucHVzaChjYWxsYmFjayk7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcGk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYnVpbGQoKSB7XHJcbiAgICAgICAgdmFyIGxhbmVMZW5ndGggPSBzZWxmLmxhbmVzLmxlbmd0aCxcclxuICAgICAgICAgICAgbWFyZ2luV2lkdGggPSBnZXRNYXJnaW5XaWR0aCgpLFxyXG4gICAgICAgICAgICBtYXJnaW5IZWlnaHQgPSBnZXRNYXJnaW5IZWlnaHQoKTtcclxuICAgICAgICBjaGFydCA9IGQzLnNlbGVjdChzZWxmLnJlbmRlclRvKVxyXG4gICAgICAgICAgICAuYXBwZW5kKFwic3ZnXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgc2VsZi53aWR0aClcclxuICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgc2VsZi5oZWlnaHQpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJnYW50dC1jaGFydFwiKTtcclxuXHJcbiAgICAgICAgY2hhcnQuYXBwZW5kKFwiZGVmc1wiKS5hcHBlbmQoXCJjbGlwUGF0aFwiKVxyXG4gICAgICAgICAgICAuYXR0cihcImlkXCIsIFwiY2xpcFwiKVxyXG4gICAgICAgICAgICAuYXBwZW5kKFwicmVjdFwiKVxyXG4gICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIG1hcmdpbldpZHRoKVxyXG4gICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCBtYXJnaW5IZWlnaHQpO1xyXG5cclxuICAgICAgICBkcmFnID0gZDMuYmVoYXZpb3IuZHJhZygpXHJcbiAgICAgICAgICAgIC5vbihcImRyYWdzdGFydFwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICBkcmFnc3RhcnQodGhpcywgZCk7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgc2VsZi5zdGFydERyYWcubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnN0YXJ0RHJhZ1tpXSh0aGlzLCBkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm9uKFwiZHJhZ1wiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICBkcmFnbW92ZSh0aGlzLCBkKTtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzZWxmLm1vdmVEcmFnLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5tb3ZlRHJhZ1tpXSh0aGlzLCBkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSApXHJcbiAgICAgICAgICAgIC5vbihcImRyYWdlbmRcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgZHJhZ2VuZCh0aGlzLCBkKTsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHNlbGYuZW5kRHJhZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZW5kRHJhZ1tpXSh0aGlzLCBkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1haW4gPSBjaGFydC5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgc2VsZi5tYXJnaW4ubGVmdCArIFwiLFwiICsgc2VsZi5tYXJnaW4udG9wICsgXCIpXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgbWFyZ2luV2lkdGgpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIG1hcmdpbkhlaWdodClcclxuICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcIm1haW5cIik7XHJcblxyXG4gICAgICAgIGl0ZW1SZWN0cyA9IG1haW4uYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgICAgICAuYXR0cihcImNsaXAtcGF0aFwiLCBcInVybCgjY2xpcClcIik7XHJcblxyXG4gICAgICAgIHRvb2x0aXBEaXYgPSBkMy5zZWxlY3QoXCJib2R5XCIpLmFwcGVuZChcImRpdlwiKVxyXG4gICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiZ2FudHQtdG9vbHRpcFwiKVxyXG4gICAgICAgICAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIDApO1xyXG5cclxuICAgICAgICB4U2NhbGUgPSBkMy50aW1lLnNjYWxlKClcclxuICAgICAgICAgICAgLmRvbWFpbihnZXRUaW1lRG9tYWluKCkpXHJcbiAgICAgICAgICAgIC5yYW5nZShbMCwgbWFyZ2luV2lkdGhdKTtcclxuXHJcbiAgICAgICAgeVNjYWxlID0gZDMuc2NhbGUubGluZWFyKClcclxuICAgICAgICAgICAgLmRvbWFpbihbMCwgbGFuZUxlbmd0aF0pXHJcbiAgICAgICAgICAgIC5yYW5nZShbMCwgbWFyZ2luSGVpZ2h0XSk7XHJcblxyXG4gICAgICAgIHhBeGlzID0gZDMuc3ZnLmF4aXMoKVxyXG4gICAgICAgICAgICAuc2NhbGUoeFNjYWxlKVxyXG4gICAgICAgICAgICAub3JpZW50KCdib3R0b20nKVxyXG4gICAgICAgICAgICAudGlja3Moc2VsZi5kdXJhdGlvbilcclxuXHJcbiAgICAgICAgeUF4aXMgPSBkMy5zdmcuYXhpcygpXHJcbiAgICAgICAgICAgIC5zY2FsZSh5U2NhbGUpXHJcbiAgICAgICAgICAgIC5vcmllbnQoJ2xlZnQnKVxyXG4gICAgICAgICAgICAudGlja3MobGFuZUxlbmd0aClcclxuICAgICAgICAgICAgLnRpY2tGb3JtYXQoXCJcIik7XHJcblxyXG4gICAgICAgIHpvb20gPSBkMy5iZWhhdmlvci56b29tKClcclxuICAgICAgICAgICAgLngoeFNjYWxlKTtcclxuXHJcbiAgICAgICAgbWFpbi5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCcgKyBtYXJnaW5IZWlnaHQgKyAnKScpXHJcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdtYWluIGF4aXMgZGF0ZScpXHJcbiAgICAgICAgICAgIC5jYWxsKHhBeGlzKVxyXG5cclxuICAgICAgICBtYWluLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdtYWluIGF4aXMgbGFuZScpXHJcbiAgICAgICAgICAgIC5jYWxsKHlBeGlzKTtcclxuXHJcbiAgICAgICAgbWFpbi5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGFuZUxhYmVscycpO1xyXG5cclxuICAgICAgICBjaGFydC5jYWxsKHpvb20pO1xyXG5cclxuICAgICAgICBkMy5zZWxlY3QoJ2h0bWwnKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgaWYgKCFzZWxmLmlzRW5hYmxlVG9vbHRpcCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50LnRhcmdldC5jbG9zZXN0KCdzdmcgcmVjdCcpKSB7XHJcbiAgICAgICAgICAgICAgICBoaWRlVG9vbHRpcCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNoYW5nZUN1cnNvcihkKSB7XHJcbiAgICAgICAgdmFyIHggPSBwYXJzZUZsb2F0KGQzLnNlbGVjdCh0aGlzKS5hdHRyKFwieFwiKSksXHJcbiAgICAgICAgICAgIHdpZHRoID0gcGFyc2VGbG9hdChkMy5zZWxlY3QodGhpcykuYXR0cihcIndpZHRoXCIpKSxcclxuICAgICAgICAgICAgeDEgPSB4ICsgd2lkdGggO1xyXG5cclxuICAgICAgICBpZiAoKHggKyBzZWxmLm1hcmdpbi5sZWZ0ICsgcmVzaXplUmVjdE1hcmdpbiA+PSBkMy5ldmVudC54KSB8fCAoeDEgKyBzZWxmLm1hcmdpbi5sZWZ0IC0gNSA8PSBkMy5ldmVudC54KSkge1xyXG4gICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXR0cihcImNsYXNzXCIsIGQuY2xhc3MgPT09IHVuZGVmaW5lZCA/ICdzdWNjZXNzJyArICgoc2VsZi5pc0VuYWJsZUl0ZW1SZXNpemUpID8gXCIgY3Vyc29yLXJlc2l6ZVwiIDogXCIgY3Vyc29yLWRlZmF1bHRcIikgOiBkLmNsYXNzICsgKChzZWxmLmlzRW5hYmxlSXRlbVJlc2l6ZSkgPyBcIiBjdXJzb3ItcmVzaXplXCIgOiBcIiBjdXJzb3ItZGVmYXVsdFwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXR0cihcImNsYXNzXCIsIGQuY2xhc3MgPT09IHVuZGVmaW5lZCA/ICdzdWNjZXNzJyArICgoc2VsZi5pc0VuYWJsZURyYWcpID8gXCIgY3Vyc29yLW1vdmVcIiA6IFwiIGN1cnNvci1kZWZhdWx0XCIpIDogZC5jbGFzcyArICgoc2VsZi5pc0VuYWJsZURyYWcpID8gXCIgY3Vyc29yLW1vdmVcIiA6IFwiIGN1cnNvci1kZWZhdWx0XCIpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZHJhZ21vdmUodGhpc0VsLCBkKSB7XHJcbiAgICAgICAgdmFyIHggPSBwYXJzZUZsb2F0KGQzLnNlbGVjdCh0aGlzRWwpLmF0dHIoXCJ4XCIpKSxcclxuICAgICAgICAgICAgeSA9IHBhcnNlRmxvYXQoZDMuc2VsZWN0KHRoaXNFbCkuYXR0cihcInlcIikpLFxyXG4gICAgICAgICAgICB3aWR0aCA9IHBhcnNlRmxvYXQoZDMuc2VsZWN0KHRoaXNFbCkuYXR0cihcIndpZHRoXCIpKSxcclxuICAgICAgICAgICAgeDEgPSB4ICsgd2lkdGgsXHJcbiAgICAgICAgICAgIGlkID0gZDMuc2VsZWN0KHRoaXNFbCkuYXR0cihcImlkXCIpLFxyXG4gICAgICAgICAgICB4VGV4dCA9ICBwYXJzZUZsb2F0KGQzLnNlbGVjdChcIiN0ZXh0LVwiICsgaWQpLmF0dHIoXCJ4XCIpKTtcclxuXHJcbiAgICAgICAgaWYgKHNlbGYuaXNFbmFibGVJdGVtUmVzaXplICYmIGQuaXNSZXNpemUpIHtcclxuICAgICAgICAgICAgaWYgKHggKyByZXNpemVSZWN0TWFyZ2luID49IGQzLmV2ZW50LnggJiYgeCA8PSB4MSAtIHJlc2l6ZVJlY3RNYXJnaW4pIHtcclxuICAgICAgICAgICAgICAgIGQuc3RhcnQgPSBEYXRlLnBhcnNlKHhTY2FsZS5pbnZlcnQoeCArIGQzLmV2ZW50LmR4KSk7XHJcbiAgICAgICAgICAgICAgICBzaG93VG9vbHRpcChkKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpc0VsKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwieFwiLCB4ICsgZDMuZXZlbnQuZHgpXHJcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCAtIGQzLmV2ZW50LmR4KTtcclxuXHJcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QoXCIjdGV4dC1cIiArIGlkKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwieFwiLCB4ICsgKHdpZHRoICsgZDMuZXZlbnQuZHgpIC8gMilcclxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsICh3aWR0aCArIGQzLmV2ZW50LmR4KSAvIDIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh4MSAtIHJlc2l6ZVJlY3RNYXJnaW4gPD0gZDMuZXZlbnQueCAmJiB4ICsgNSA8PSB4MSkge1xyXG4gICAgICAgICAgICAgICBkLmVuZCA9IERhdGUucGFyc2UoeFNjYWxlLmludmVydChwYXJzZUZsb2F0KHdpZHRoICsgZDMuZXZlbnQuZHgpICsgcGFyc2VGbG9hdCh4KSkpXHJcbiAgICAgICAgICAgICAgIHNob3dUb29sdGlwKGQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzRWwpXHJcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIGQzLmV2ZW50LmR4KTtcclxuICAgICAgICAgICAgICAgIGQzLnNlbGVjdChcIiN0ZXh0LVwiICsgaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIHggKyAod2lkdGggKyBkMy5ldmVudC5keCkgLyAyKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgKHdpZHRoICsgZDMuZXZlbnQuZHgpIC8gMik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNlbGYuaXNFbmFibGVEcmFnICYmIGQuaXNNb3ZlKSB7XHJcbiAgICAgICAgICAgIGQuc3RhcnQgPSBEYXRlLnBhcnNlKHhTY2FsZS5pbnZlcnQoeCArIGQzLmV2ZW50LmR4KSk7XHJcbiAgICAgICAgICAgIGQuZW5kID0gRGF0ZS5wYXJzZSh4U2NhbGUuaW52ZXJ0KHBhcnNlRmxvYXQod2lkdGggKyBkMy5ldmVudC5keCkgKyBwYXJzZUZsb2F0KHgpKSlcclxuICAgICAgICAgICAgc2hvd1Rvb2x0aXAoZCk7XHJcblxyXG4gICAgICAgICAgICBkMy5zZWxlY3QodGhpc0VsKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIHggKyBkMy5ldmVudC5keClcclxuICAgICAgICAgICAgICAgIC5hdHRyKFwieVwiLCB5ICsgZDMuZXZlbnQuZHkpO1xyXG4gICAgICAgICAgICBkMy5zZWxlY3QoXCIjdGV4dC1cIiArIGlkKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIHhUZXh0ICsgZDMuZXZlbnQuZHgpXHJcbiAgICAgICAgICAgICAgICAuYXR0cihcInlcIiwgKHkgKyBzZWxmLml0ZW1IZWlnaHQvMikgKyBkMy5ldmVudC5keSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGRyYWdlbmQodGhpc0VsLCBkKSB7XHJcbiAgICAgICAgaWYgKCFzZWxmLmlzRW5hYmxlRHJhZyAmJiAhc2VsZi5pc0VuYWJsZUl0ZW1SZXNpemUpIHJldHVybjtcclxuICAgICAgICB2YXIgZWwgPSBkMy5zZWxlY3QodGhpc0VsKSxcclxuICAgICAgICAgICAgbGFuZSA9IE1hdGguZmxvb3IoeVNjYWxlLmludmVydChlbC5hdHRyKFwieVwiKSkpLFxyXG4gICAgICAgICAgICBzdGFydCA9IGVsLmF0dHIoXCJ4XCIpLFxyXG4gICAgICAgICAgICBpZCA9IGVsLmF0dHIoXCJpZFwiKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgaWYgKGxhbmUgPj0gc2VsZi5sYW5lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbGFuZSA9IHNlbGYubGFuZXMubGVuZ3RoIC0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxhbmUgPCAwKSB7XHJcbiAgICAgICAgICAgIGxhbmUgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGVsZXRlIGQuaXNSZXNpemU7XHJcbiAgICAgICAgZGVsZXRlIGQuaXNNb3ZlO1xyXG5cclxuICAgICAgICBlbC5hdHRyKFwieVwiLCB5U2NhbGUobGFuZSkpO1xyXG4gICAgICAgIGQzLnNlbGVjdChcIiN0ZXh0LVwiICsgaWQpLmF0dHIoXCJ5XCIsIHlTY2FsZShsYW5lKSArIHNlbGYuaXRlbUhlaWdodC8yKTtcclxuXHJcbiAgICAgICAgZC5sYW5lID0gbGFuZTtcclxuXHJcbiAgICAgICAgZC5zdGFydCA9IERhdGUucGFyc2UoeFNjYWxlLmludmVydChwYXJzZUZsb2F0KHN0YXJ0KSkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGQuZW5kID0gRGF0ZS5wYXJzZSh4U2NhbGUuaW52ZXJ0KHBhcnNlRmxvYXQoZWwuYXR0cihcIndpZHRoXCIpKSArIHBhcnNlRmxvYXQoc3RhcnQpKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaGlkZVRvb2x0aXAoKTtcclxuICAgICAgICByZW5kZXJTdWJsYW5lKCk7XHJcbiAgICAgICAgcmVkcmF3KCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGRyYWdzdGFydCh0aGlzRWwsIGQpIHtcclxuICAgICAgICBpZiAoIXNlbGYuaXNFbmFibGVEcmFnICYmICFzZWxmLmlzRW5hYmxlSXRlbVJlc2l6ZSkgcmV0dXJuO1xyXG4gICAgICAgIHZhciBjdXJzb3IgPSBkMy5zZWxlY3QodGhpc0VsKS5hdHRyKFwiY2xhc3NcIik7XHJcbiAgICAgICAgaWYoY3Vyc29yLmluY2x1ZGVzKFwiY3Vyc29yLXJlc2l6ZVwiKSkge1xyXG4gICAgICAgICAgICBkLmlzUmVzaXplID0gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGN1cnNvci5pbmNsdWRlcyhcImN1cnNvci1tb3ZlXCIpKSB7XHJcbiAgICAgICAgICAgIGQuaXNNb3ZlID0gdHJ1ZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZC5vbGRTdGFydCA9IGQuc3RhcnQ7XHJcbiAgICAgICAgZC5vbGRFbmQgPSBkLmVuZDtcclxuICAgICAgICBkMy5ldmVudC5zb3VyY2VFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjb3B5U2FtZVByb3AoY29weVRvLCBjb3B5RnJvbSkge1xyXG4gICAgICAgIHZhciBwO1xyXG5cclxuICAgICAgICBmb3IgKHAgaW4gY29weUZyb20pIHtcclxuICAgICAgICAgICAgaWYgKGNvcHlUby5oYXNPd25Qcm9wZXJ0eShwKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRvU3RyLmNhbGwoY29weUZyb21bcF0pID09PSBvc3RyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29weVNhbWVQcm9wKGNvcHlUb1twXSwgY29weUZyb21bcF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29weVRvW3BdID0gY29weUZyb21bcF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZW5hYmxlRHJhZyhpc0VuYWJsZURyYWcpIHtcclxuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzZWxmLmlzRW5hYmxlRHJhZztcclxuICAgICAgICBzZWxmLmlzRW5hYmxlRHJhZyA9IGlzRW5hYmxlRHJhZztcclxuICAgICAgICByZWRyYXcoKTtcclxuICAgICAgICByZXR1cm4gYXBpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGVuYWJsZUl0ZW1SZXNpemUoaXNFbmFibGVJdGVtUmVzaXplKSB7XHJcbiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gc2VsZi5pc0VuYWJsZUl0ZW1SZXNpemU7XHJcbiAgICAgICAgc2VsZi5pc0VuYWJsZUl0ZW1SZXNpemUgPSBpc0VuYWJsZUl0ZW1SZXNpemU7XHJcbiAgICAgICAgcmVkcmF3KCk7XHJcbiAgICAgICAgcmV0dXJuIGFwaTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBlbmFibGVUb29sdGlwKGlzRW5hYmxlVG9vbHRpcCkge1xyXG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHNlbGYuaXNFbmFibGVUb29sdGlwO1xyXG4gICAgICAgIHNlbGYuaXNFbmFibGVUb29sdGlwID0gaXNFbmFibGVUb29sdGlwO1xyXG4gICAgICAgIHJlZHJhdygpO1xyXG4gICAgICAgIHJldHVybiBhcGk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZW5hYmxlWm9vbShpc0VuYWJsZVpvb20pIHtcclxuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzZWxmLmlzRW5hYmxlWm9vbTtcclxuICAgICAgICB6b29tLm9uKFwiem9vbVwiLCAoaXNFbmFibGVab29tKSA/IHJlZHJhdyA6IG51bGwpO1xyXG4gICAgICAgIHNlbGYuaXNFbmFibGVab29tID0gaXNFbmFibGVab29tO1xyXG4gICAgICAgIHJldHVybiBhcGk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0TGFuZUxlbmd0aCgpIHtcclxuICAgICAgICByZXR1cm4gKGQzLm1heChzZWxmLml0ZW1zLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmxhbmUgfSkgKyAxKSB8fCAwO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldE1hcmdpbldpZHRoKCkge1xyXG4gICAgICAgIHJldHVybiBzZWxmLndpZHRoIC0gc2VsZi5tYXJnaW4ucmlnaHQgLSBzZWxmLm1hcmdpbi5sZWZ0O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldE1hcmdpbkhlaWdodCgpIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5oZWlnaHQgLSBzZWxmLm1hcmdpbi50b3AgLSBzZWxmLm1hcmdpbi5ib3R0b207XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0VGltZURvbWFpbigpIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBzZWxmLnN0YXJ0VGltZSAgfHwgZDMubWluKHNlbGYuaXRlbXMsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuc3RhcnQgfSksXHJcbiAgICAgICAgICAgIHNlbGYuZW5kVGltZSAgICB8fCBkMy5tYXgoc2VsZi5pdGVtcywgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5lbmQgfSlcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGhpZGVUb29sdGlwKCkge1xyXG4gICAgICAgIHRvb2x0aXBEaXYudHJhbnNpdGlvbigpXHJcbiAgICAgICAgICAgIC5kdXJhdGlvbig1MDApXHJcbiAgICAgICAgICAgIC5zdHlsZShcIm9wYWNpdHlcIiwgMClcclxuICAgICAgICAgICAgLnN0eWxlKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaXRlbXMobmV3SXRlbXMpIHtcclxuICAgICAgICB2YXIgaXRlbXNUeXBlID0gdG9TdHIuY2FsbChuZXdJdGVtcyk7XHJcblxyXG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHNlbGYuaXRlbXM7XHJcbiAgICAgICAgaWYgKGl0ZW1zVHlwZSAhPT0gYXN0cikgdGhyb3dFcnJvcignRXhwZWN0ZWQgYXJyYXkuIEdvdDogJyArIGl0ZW1zVHlwZSk7XHJcbiAgICAgICAgc2VsZi5pdGVtcyA9IG5ld0l0ZW1zO1xyXG5cclxuICAgICAgICBvbkl0ZW1zQ2hhbmdlKCk7XHJcbiAgICAgICAgcmV0dXJuIGFwaTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBsYW5lcyhuZXdMYW5lcykge1xyXG4gICAgICAgIHZhciBsYW5lc1R5cGUgPSB0b1N0ci5jYWxsKG5ld0xhbmVzKTtcclxuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzZWxmLmxhbmVzO1xyXG4gICAgICAgIGlmIChsYW5lc1R5cGUgIT09IGFzdHIpIHRocm93RXJyb3IoJ0V4cGVjdGVkIGFycmF5LiBHb3Q6ICcgKyBsYW5lc1R5cGUpO1xyXG4gICAgICAgIHNlbGYubGFuZXMgPSBuZXdMYW5lcztcclxuICAgICAgICBzZWxmLmxhbmVzLmxlbmd0aCA9IGdldExhbmVMZW5ndGgoKSB8fCBzZWxmLmxhbmVzLmxlbmd0aDtcclxuICAgICAgICBzaG93TGFuZUxhYmVsKCFzZWxmLmlzU2hvd0xhbmVMYWJlbCk7XHJcbiAgICAgICAgLy8gc2hvd0xhbmVMYWJlbCghc2VsZi5pc1Nob3dMYW5lTGFiZWwpO1xyXG4gICAgICAgIHJldHVybiBhcGk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbWFyZ2luKG5ld01hcmdpbikge1xyXG4gICAgICAgIHZhciBtc2cgPSBcIiBtYXJnaW4gdmFsdWUgaXMgaW5jb3JyZWN0LiBBbGwgdmFsdWVzIHNob3VsZCBiZSBudW1iZXJzXCI7XHJcbiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gc2VsZi5tYXJnaW47XHJcbiAgICAgICAgaWYgKG5ld01hcmdpbi50b3AgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAoaXNOYU4obmV3TWFyZ2luLnRvcCkpIHRocm93RXJyb3IoXCInVG9wJ1wiICsgbXNnKTtcclxuICAgICAgICAgICAgc2VsZi5tYXJnaW4udG9wID0gcGFyc2VJbnQobmV3TWFyZ2luLnRvcCk7XHJcbiAgICAgICAgICAgIG1haW4uYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIHNlbGYubWFyZ2luLmxlZnQgKyBcIixcIiArIHNlbGYubWFyZ2luLnRvcCArIFwiKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5ld01hcmdpbi5yaWdodCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGlmIChpc05hTihuZXdNYXJnaW4ucmlnaHQpKSB0aHJvd0Vycm9yKFwiJ1JpZ2h0J1wiICsgbXNnKTtcclxuICAgICAgICAgICAgc2VsZi5tYXJnaW4ucmlnaHQgPSBwYXJzZUludChuZXdNYXJnaW4ucmlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobmV3TWFyZ2luLmJvdHRvbSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGlmIChpc05hTihuZXdNYXJnaW4uYm90dG9tKSkgdGhyb3dFcnJvcihcIidCb3R0b20nXCIgKyBtc2cpO1xyXG4gICAgICAgICAgICBzZWxmLm1hcmdpbi5ib3R0b20gPSBwYXJzZUludChuZXdNYXJnaW4uYm90dG9tKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5ld01hcmdpbi5sZWZ0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKGlzTmFOKG5ld01hcmdpbi5sZWZ0KSkgdGhyb3dFcnJvcihcIidMZWZ0J1wiICsgbXNnKTtcclxuICAgICAgICAgICAgc2VsZi5tYXJnaW4ubGVmdCA9IHBhcnNlSW50KG5ld01hcmdpbi5sZWZ0KTtcclxuICAgICAgICAgICAgbWFpbi5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgc2VsZi5tYXJnaW4ubGVmdCArIFwiLFwiICsgc2VsZi5tYXJnaW4udG9wICsgXCIpXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVzaXplKCk7XHJcbiAgICAgICAgcmV0dXJuIGFwaTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBvbkl0ZW1zQ2hhbmdlKCkge1xyXG4gICAgICAgIHZhciBsYW5lTGVuZ3RoID0gZ2V0TGFuZUxlbmd0aCgpO1xyXG4gICAgICAgIHNlbGYubGFuZXMubGVuZ3RoID0gbGFuZUxlbmd0aDtcclxuICAgICAgICB4U2NhbGUuZG9tYWluKGdldFRpbWVEb21haW4oKSk7XHJcbiAgICAgICAgeUF4aXMudGlja3MobGFuZUxlbmd0aCk7XHJcbiAgICAgICAgeVNjYWxlLmRvbWFpbihbMCwgbGFuZUxlbmd0aF0pO1xyXG4gICAgICAgIHpvb20ueCh4U2NhbGUpO1xyXG4gICAgICAgIHJlZHJhdygpO1xyXG4gICAgICAgIHJlZHJhdygpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlZHJhdygpIHtcclxuICAgICAgICB2YXIgcmVjdHM7XHJcblxyXG4gICAgICAgIHJlY3RzID0gaXRlbVJlY3RzLnNlbGVjdEFsbChcInJlY3RcIilcclxuICAgICAgICAgICAgLmRhdGEoc2VsZi5pdGVtcylcclxuICAgICAgICAgICAgLmF0dHIoXCJpZFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmlkIH0pXHJcbiAgICAgICAgICAgIC5hdHRyKFwieFwiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4geFNjYWxlKGQuc3RhcnQpOyB9KVxyXG4gICAgICAgICAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoc2VsZi5zdWJsYW5lcyA8IDIpID8geVNjYWxlKGQubGFuZSkgOiB5U2NhbGUoZC5sYW5lKSArIGQuc3VibGFuZSpzZWxmLml0ZW1IZWlnaHQ7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIHhTY2FsZShkLmVuZCkgLSB4U2NhbGUoZC5zdGFydCk7IH0pXHJcbiAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIHNlbGYuaXRlbUhlaWdodClcclxuICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5jbGFzcyA9PT0gIHVuZGVmaW5lZCA/ICdzdWNjZXNzJyA6IGQuY2xhc3M7IH0pXHJcbiAgICAgICAgICAgIC8vIC5hdHRyKFwib3BhY2l0eVwiLCAuNzUpXHJcbiAgICAgICAgICAgIC5jYWxsKGRyYWcpXHJcbiAgICAgICAgICAgIC5vbihcIm1vdXNlb3ZlclwiLCAoc2VsZi5pc0VuYWJsZVRvb2x0aXApID8gc2hvd1Rvb2x0aXAgOiBudWxsKVxyXG4gICAgICAgICAgICAub24oXCJtb3VzZWxlYXZlXCIsIChzZWxmLmlzRW5hYmxlVG9vbHRpcCkgPyBoaWRlVG9vbHRpcCA6IG51bGwpXHJcbiAgICAgICAgICAgIC5vbihcIm1vdXNlbW92ZVwiLCBjaGFuZ2VDdXJzb3IpO1xyXG5cclxuICAgICAgICByZWN0cy5lbnRlcigpLmFwcGVuZChcInJlY3RcIik7XHJcbiAgICAgICAgcmVjdHMuZXhpdCgpLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICB2YXIgdGV4dHMgPSBpdGVtUmVjdHMuc2VsZWN0QWxsKFwidGV4dFwiKVxyXG4gICAgICAgICAgICAuZGF0YShzZWxmLml0ZW1zKVxyXG4gICAgICAgICAgICAudGV4dChmdW5jdGlvbihkKXtcclxuICAgICAgICAgICAgcmV0dXJuIGQubGFiZWw7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hdHRyKFwiaWRcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJ0ZXh0LVwiICsgZC5pZCB9KVxyXG4gICAgICAgICAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4geFNjYWxlKGQuc3RhcnQpICsgKHhTY2FsZShkLmVuZCkgLSB4U2NhbGUoZC5zdGFydCkpIC8gMjsgfSlcclxuICAgICAgICAgICAgLmF0dHIoXCJ5XCIsZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoc2VsZi5zdWJsYW5lcyA8IDIpID8geVNjYWxlKGQubGFuZSkgKyBzZWxmLml0ZW1IZWlnaHQvMiA6IHlTY2FsZShkLmxhbmUpICsgZC5zdWJsYW5lKnNlbGYuaXRlbUhlaWdodCArIHNlbGYuaXRlbUhlaWdodC8yO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYXR0cihcImZvbnQtc2l6ZVwiLCAxMSlcclxuICAgICAgICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKVxyXG4gICAgICAgICAgICAuYXR0cihcInRleHQtaGVpZ2h0XCIsIDIwKVxyXG4gICAgICAgICAgICAuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQuZmlsbFRpdGxlID09PSB1bmRlZmluZWQgPyAnI2ZmZicgKyAnIG1haW4nIDogZC5maWxsVGl0bGUgKyAnIG1haW4nOyB9KVxyXG4gICAgICAgICAgICAvLyAuYXR0cihcImZpbGxcIiwgXCIjZmZmXCIpO1xyXG5cclxuICAgICAgICB0ZXh0cy5lbnRlcigpLmFwcGVuZChcInRleHRcIik7XHJcbiAgICAgICAgdGV4dHMuZXhpdCgpLnJlbW92ZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG1haW4uc2VsZWN0KCdnLm1haW4uYXhpcy5kYXRlJykuY2FsbCh4QXhpcyk7XHJcbiAgICAgICAgbWFpbi5zZWxlY3QoJ2cubWFpbi5heGlzLmxhbmUnKS5jYWxsKHlBeGlzKTtcclxuXHJcbiAgICAgICAgaGlkZVRvb2x0aXAoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZXNpemUoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaXNBdXRvUmVzaXplKSB7XHJcbiAgICAgICAgICAgIHNlbGYud2lkdGggPSBwYXJzZUludChkMy5zZWxlY3Qoc2VsZi5yZW5kZXJUbykuc3R5bGUoJ3dpZHRoJykpO1xyXG4gICAgICAgICAgICBzZWxmLmhlaWdodCA9IHBhcnNlSW50KGQzLnNlbGVjdChzZWxmLnJlbmRlclRvKS5zdHlsZSgnaGVpZ2h0JykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbWFyZ2luV2lkdGggPSBnZXRNYXJnaW5XaWR0aCgpLFxyXG4gICAgICAgICAgICBtYXJnaW5IZWlnaHQgPSBnZXRNYXJnaW5IZWlnaHQoKTtcclxuXHJcbiAgICAgICAgeFNjYWxlLnJhbmdlKFswLCBtYXJnaW5XaWR0aF0pO1xyXG4gICAgICAgIHlTY2FsZS5yYW5nZShbMCwgbWFyZ2luSGVpZ2h0XSk7XHJcbiAgICAgICAgY2hhcnQuYXR0cihcIndpZHRoXCIsIHNlbGYud2lkdGgpO1xyXG4gICAgICAgIGNoYXJ0LmF0dHIoXCJoZWlnaHRcIiwgc2VsZi5oZWlnaHQpO1xyXG4gICAgICAgIGNoYXJ0LnNlbGVjdCgnZGVmcycpLnNlbGVjdCgnY2xpcFBhdGgnKS5zZWxlY3QoJ3JlY3QnKS5hdHRyKFwid2lkdGhcIiwgbWFyZ2luV2lkdGgpO1xyXG4gICAgICAgIGNoYXJ0LnNlbGVjdCgnZGVmcycpLnNlbGVjdCgnY2xpcFBhdGgnKS5zZWxlY3QoJ3JlY3QnKS5hdHRyKFwiaGVpZ2h0XCIsIG1hcmdpbldpZHRoKTtcclxuICAgICAgICBtYWluLmF0dHIoXCJ3aWR0aFwiLCBtYXJnaW5XaWR0aCk7XHJcbiAgICAgICAgbWFpbi5hdHRyKFwiaGVpZ2h0XCIsIG1hcmdpbkhlaWdodCk7XHJcblxyXG4gICAgICAgIG1haW4uc2VsZWN0KCdnLm1haW4uYXhpcy5kYXRlJylcclxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoMCwnICsgZ2V0TWFyZ2luSGVpZ2h0KCkgKyAnKScpO1xyXG5cclxuICAgICAgICBtYWluLnNlbGVjdCgnZy5sYW5lTGFiZWxzJylcclxuICAgICAgICAgICAgLnNlbGVjdEFsbChcIi5sYW5lVGV4dFwiKVxyXG4gICAgICAgICAgICAuZGF0YShzZWxmLmxhbmVzKVxyXG4gICAgICAgICAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24oZCwgaSkge3JldHVybiB5U2NhbGUoaSArIC41KTt9KVxyXG5cclxuICAgICAgICB6b29tLngoeFNjYWxlKTtcclxuXHJcbiAgICAgICAgc2hvd1hHcmlkKHNlbGYuaXNTaG93WUdyaWQpO1xyXG4gICAgICAgIHNob3dZR3JpZChzZWxmLmlzU2hvd1lHcmlkKTtcclxuXHJcbiAgICAgICAgcmVkcmF3KCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd0xhbmVMYWJlbChpc1Nob3dMYW5lTGFiZWwpIHtcclxuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzZWxmLmlzU2hvd0xhbmVMYWJlbDtcclxuICAgICAgICBzZWxmLmlzU2hvd0xhbmVMYWJlbCA9IGlzU2hvd0xhbmVMYWJlbDtcclxuICAgICAgICBpZiAoaXNTaG93TGFuZUxhYmVsID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBtYWluLnNlbGVjdEFsbChcIi5sYW5lVGV4dFwiKS5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG1haW4uc2VsZWN0KCdnLmxhbmVMYWJlbHMnKS5zZWxlY3RBbGwoXCIubGFuZVRleHRcIilcclxuICAgICAgICAgICAgICAgIC5kYXRhKHNlbGYubGFuZXMpXHJcbiAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJ0ZXh0XCIpXHJcbiAgICAgICAgICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7cmV0dXJuIGQ7fSlcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsZnVuY3Rpb24oZCwgaW5kZXgpIHtyZXR1cm4gJ2xhbmUtJyArIGluZGV4O30pXHJcbiAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgLXNlbGYubWFyZ2luLmxlZnQpXHJcbiAgICAgICAgICAgICAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24oZCwgaSkge3JldHVybiB5U2NhbGUoaSArIC41KTt9KVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi41ZXhcIilcclxuICAgICAgICAgICAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgXCJzdGFydFwiKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxhbmVUZXh0XCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGFwaTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaG93VG9vbHRpcChkKSB7XHJcbiAgICAgICAgaWYgKGQzLmV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjtcclxuICAgICAgICB0b29sdGlwRGl2LnN0eWxlKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpXHJcbiAgICAgICAgICAgIC50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgLmR1cmF0aW9uKDIwMClcclxuICAgICAgICAgICAgLnN0eWxlKFwib3BhY2l0eVwiLCAuOSk7XHJcbiAgICAgICAgdG9vbHRpcERpdi5odG1sKCh0eXBlb2YgZC50b29sdGlwID09PSAnZnVuY3Rpb24nKSA/IGQudG9vbHRpcCgpIDogZC50b29sdGlwKVxyXG4gICAgICAgICAgICAuc3R5bGUoXCJsZWZ0XCIsIChkMy5ldmVudC5wYWdlWCkgKyBcInB4XCIpXHJcbiAgICAgICAgICAgIC5zdHlsZShcInRvcFwiLCAoZDMuZXZlbnQucGFnZVkpICsgXCJweFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZW5kZXJTdWJsYW5lKCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHNlcGFyYXRlU3VibGFuZSgpO1xyXG5cclxuICAgICAgICB2YXIgbWF4ID0gZ2V0TWF4U3ViTGFuZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHNpemUoc2VsZi53aWR0aCwgIG1heC5tYXgqc2VsZi5pdGVtSGVpZ2h0KnNlbGYubGFuZXMubGVuZ3RoICsgc2VsZi5tYXJnaW4udG9wICsgc2VsZi5tYXJnaW4uYm90dG9tKTtcclxuICAgICAgICBcclxuICAgICAgICBzZWxmLnN1YmxhbmVzID0gbWF4Lm1heDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaG93WEdyaWQoaXNTaG93WEdyaWQpIHtcclxuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzZWxmLmlzU2hvd1hHcmlkO1xyXG4gICAgICAgIHZhciBoZWlnaHQgPSAoaXNTaG93WEdyaWQgIT09IGZhbHNlKSA/IC1nZXRNYXJnaW5IZWlnaHQoKSA6IC02O1xyXG4gICAgICAgIHhBeGlzLnRpY2tTaXplKGhlaWdodCwgMCwgMCk7XHJcbiAgICAgICAgc2VsZi5pc1Nob3dYR3JpZCA9IGlzU2hvd1hHcmlkO1xyXG4gICAgICAgIG1haW4uc2VsZWN0KCdnLm1haW4uYXhpcy5kYXRlJykuY2FsbCh4QXhpcyk7XHJcbiAgICAgICAgcmV0dXJuIGFwaTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaG93WUdyaWQoaXNTaG93WUdyaWQpIHtcclxuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzZWxmLmlzU2hvd1lHcmlkO1xyXG4gICAgICAgIHZhciB3aWR0aCA9IChpc1Nob3dZR3JpZCAhPT0gZmFsc2UpID8gLWdldE1hcmdpbldpZHRoKCkgOiAtNjtcclxuICAgICAgICB5QXhpcy50aWNrU2l6ZSh3aWR0aCwgMCwgMCk7XHJcbiAgICAgICAgc2VsZi5pc1Nob3dZR3JpZCA9IGlzU2hvd1lHcmlkO1xyXG4gICAgICAgIG1haW4uc2VsZWN0KCdnLm1haW4uYXhpcy5sYW5lJykuY2FsbCh5QXhpcyk7XHJcbiAgICAgICAgcmV0dXJuIGFwaTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaXplKHdpZHRoLCBoZWlnaHQpIHtcclxuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBbc2VsZi53aWR0aCwgc2VsZi5oZWlnaHRdO1xyXG4gICAgICAgIHNlbGYud2lkdGggPSBwYXJzZUludCh3aWR0aCkgfHwgc2VsZi53aWR0aDtcclxuICAgICAgICBzZWxmLmhlaWdodCA9IHBhcnNlSW50KGhlaWdodCkgfHwgc2VsZi5oZWlnaHQ7XHJcbiAgICAgICAgYXV0b3Jlc2l6ZShmYWxzZSk7XHJcbiAgICAgICAgcmVzaXplKCk7XHJcbiAgICAgICAgcmV0dXJuIGFwaTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzdWJsYW5lcyhuZXdTdWJsYW5lcykge1xyXG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHNlbGYuc3VibGFuZXM7XHJcbiAgICAgICAgc2VsZi5zdWJsYW5lcyA9IG5ld1N1YmxhbmVzO1xyXG4gICAgICAgIHJlZHJhdygpO1xyXG4gICAgICAgIHJldHVybiBhcGk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZnVuY3Rpb24gZ2V0SXRlbUhlaWdodCgpIHtcclxuICAgIC8vICAgICByZXR1cm4gZ2V0TWFyZ2luSGVpZ2h0KCkgLyAoc2VsZi5sYW5lcy5sZW5ndGggfHwgMSkgLyAoc2VsZi5zdWJsYW5lcyB8fCAxKTtcclxuICAgIC8vIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRJdGVtc0J5TGFuZShsYW5lKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuaXRlbXMuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubGFuZSA9PSBsYW5lO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2VwYXJhdGVTdWJsYW5lKCkge1xyXG4gICAgICAgIGZvcih2YXIgbCA9IDA7IGwgPCBzZWxmLmxhbmVzLmxlbmd0aDsgbCsrKSB7XHJcbiAgICAgICAgICAgIHZhciBpdGVtTGFuZXMgPSBzZWxmLml0ZW1zLmZpbHRlcihmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmoubGFuZSA9PSBsO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGl0ZW1MYW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVtTGFuZXNbaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgaXRlbUNoYW5nZSA9IHNlbGYuaXRlbXMuZmluZChcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihvYmopeyByZXR1cm4gb2JqLmlkID09PSBpdGVtLmlkfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGl0ZW1DaGFuZ2Uuc3VibGFuZSA9IGk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRNYXhTdWJMYW5lKCkge1xyXG4gICAgICAgIHZhciBtYXhTdWJsYW5lID0ge1xyXG4gICAgICAgICAgICBtYXg6IDAsXHJcbiAgICAgICAgICAgIGxhbmVzOiBbXVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZDMubWF4KHNlbGYuaXRlbXMsIGZ1bmN0aW9uKGQpIHsgXHJcbiAgICAgICAgICAgIGlmKChkLnN1YmxhbmUgKyAxKSA+IG1heFN1YmxhbmUubWF4KSB7XHJcbiAgICAgICAgICAgICAgICBtYXhTdWJsYW5lLm1heCA9IGQuc3VibGFuZSArIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbWF4U3VibGFuZS5sYW5lcyA9IHNlbGYuaXRlbXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqLnN1YmxhbmUgPT0gKG1heFN1YmxhbmUubWF4IC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmxhbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgcmV0dXJuIG1heFN1YmxhbmU7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdGhyb3dFcnJvcihtc2cpIHtcclxuICAgICAgICB0aHJvdyBUeXBlRXJyb3IobXNnKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYXBpO1xyXG59XHJcbiJdfQ==
